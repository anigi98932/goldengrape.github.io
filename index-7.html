<!DOCTYPE html>
<html prefix="" lang="zh_cn">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a blog site for GoldenGrape.">
<meta name="viewport" content="width=device-width">
<title>GoldenGrape's Blog (旧文章页 7) | GoldenGrape's Blog</title>
<link href="assets/css/all.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="https://goldengrape.github.io/index-7.html">
<link rel="prev" href="index-8.html" type="text/html">
<link rel="next" href="index-6.html" type="text/html">
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
    },
    displayAlign: 'center', // Change this to 'left' if you want left-aligned equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script><!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body class="theme-base-09">
    <a href="#content" class="sr-only sr-only-focusable">跳到主内容</a>
    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
            styles, `#sidebar-checkbox` for behavior. -->
    <input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox"><!-- Toggleable sidebar --><div class="sidebar" id="sidebar">
        <div class="sidebar-item">
            
<!-- DuckDuckGo custom search -->
<form method="get" id="search" action="https://duckduckgo.com/" class="navbar-form pull-left">
<input type="hidden" name="sites" value="https://goldengrape.github.io/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" class="span2" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->

        </div>
        
    <nav id="menu" role="navigation" class="sidebar-nav"><a class="sidebar-nav-item" href="index.html">首页</a>
        <a class="sidebar-nav-item" href="archive.html">文章存档</a>
        <a class="sidebar-nav-item" href="categories/">标签</a>
        <a class="sidebar-nav-item" href="categories/jiao-cheng/">教程</a>
        <a class="sidebar-nav-item" href="github-projects/">开源项目</a>
        <a class="sidebar-nav-item" href="rss.xml">RSS feed</a>
    
    
    </nav>
</div>

    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          
    <h3 id="brand" class="masthead-title">
      <a href="https://goldengrape.github.io/" title="GoldenGrape's Blog" rel="home">GoldenGrape's Blog</a>
    </h3>

        </div>
      </div>

      <div class="container content" id="content">
        

<div class="posts">
    <article class="post h-entry post-text"><header><h1 class="post-title p-name"><a href="posts/python/beware-Free-variables-and-bound-variables/" class="u-url">用jupyter写程序时小心意外的全局变量</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Golden Grape</span></p>
            <p class="dateline"><a href="posts/python/beware-Free-variables-and-bound-variables/" rel="bookmark"><time class="post-date published dt-published" datetime="2018-02-07T17:00:00+08:00" title="2018-02-07 17:00">2018-02-07 17:00</time></a></p>
        </div>
    </header><div class="p-summary entry-summary">
    <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>这周写作业, 用jupyter时遇坑一枚, 导致我改了作业10次以后才全对通过. 
<img src="https://i.loli.net/2018/02/07/5a7abfe105014.png" alt="10次交作业">
而且这个坑与我当前的编程习惯有关. 有必要记录下来, 以免未来再犯. 
</p>
<p class="more"><a href="posts/python/beware-Free-variables-and-bound-variables/">阅读更多…</a></p>
</div>
</div>
</div>
</div>
</div>
    </div>
    </article><article class="post h-entry post-text"><header><h1 class="post-title p-name"><a href="posts/python/NOAA-weather-data-from-dly-to-pandas-df/" class="u-url">NOAA天气数据格式转换</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Golden Grape</span></p>
            <p class="dateline"><a href="posts/python/NOAA-weather-data-from-dly-to-pandas-df/" rel="bookmark"><time class="post-date published dt-published" datetime="2018-02-03T14:00:00+08:00" title="2018-02-03 14:00">2018-02-03 14:00</time></a></p>
        </div>
    </header><div class="p-summary entry-summary">
    <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Convert NOAA weahter data file ".dly" to Pandas DataFrame</p>
<p>Follow this instruction <a href="https://www1.ncdc.noaa.gov/pub/data/ghcn/daily/readme.txt">https://www1.ncdc.noaa.gov/pub/data/ghcn/daily/readme.txt</a></p>
<p>Get data from ftp://ftp.ncdc.noaa.gov/pub/data/ghcn/daily</p>
<p class="more"><a href="posts/python/NOAA-weather-data-from-dly-to-pandas-df/">阅读更多…</a></p>
</div>
</div>
</div>
</div>
</div>
    </div>
    </article><article class="post h-entry post-text"><header><h1 class="post-title p-name"><a href="posts/bulabula/open-mind-for-merit/" class="u-url">脑洞一打开, 功德自然来</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Golden Grape</span></p>
            <p class="dateline"><a href="posts/bulabula/open-mind-for-merit/" rel="bookmark"><time class="post-date published dt-published" datetime="2018-02-02T12:20:00+08:00" title="2018-02-02 12:20">2018-02-02 12:20</time></a></p>
        </div>
    </header><div class="p-summary entry-summary">
    <div>
<p>本文使用<a href="https://creativecommons.org/licenses/by/4.0/deed.zh">cc-by 4.0 协议</a></p>
<ul>
<li>您可以自由地：共享, 演绎</li>
<li>惟须遵守下列条件：署名</li>
<li>非常欢迎商业使用</li>
</ul>
<hr>
<h2>六字真言安全带护套:</h2>
<p>安全带上做一护套, 用反光布绣上
”唵嘛呢叭咪吽”</p>
<p><img alt="六字真言" src="https://i.loli.net/2018/02/02/5a73f2af29771.png"></p>
<p>系好安全带时有六字真言胸前护体, 注意<strong>切不可置于背后</strong>或者放在一边.</p>
<p>发明是要提供社会有益效果的.</p>
<p>但是世上居然有类似<a href="https://search.jd.com/Search?keyword=%E5%AE%89%E5%85%A8%E5%B8%A6%E6%8F%92%E5%A4%B4">安全带插头</a>这种邪恶的发明, 用来欺骗汽车的安检系统, 在不系安全带时避免警报器响. 这是在谋财+害命.</p>
<p>很遗憾, 据我观察如果一辆车上摆着佛像, 后视镜上挂着佛像/十字架/毛主席像, 那么安全带扣位置上高概率出现这种安全带插头. 喂! 你们的神已经派遣<a href="https://en.wikipedia.org/wiki/Nils_Bohlin">Nils Bohlin</a>在1958年发明<a href="https://zh.wikipedia.org/wiki/%E5%BA%A7%E4%BD%8D%E5%AE%89%E5%85%A8%E5%B8%B6">三点式安全带</a>来保护大家了, 为什么要欺骗他.</p>
<p class="more"><a href="posts/bulabula/open-mind-for-merit/">阅读更多…</a></p>
</div>
    </div>
    </article><article class="post h-entry post-text"><header><h1 class="post-title p-name"><a href="posts/bulabula/weixue/" class="u-url">励志两则: 为学</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Golden Grape</span></p>
            <p class="dateline"><a href="posts/bulabula/weixue/" rel="bookmark"><time class="post-date published dt-published" datetime="2018-01-30T21:10:00+08:00" title="2018-01-30 21:10">2018-01-30 21:10</time></a></p>
        </div>
    </header><div class="p-summary entry-summary">
    <div>
<p>(写于2012年3月)</p>
<ul>
<li>
<p>学位和能力是两码事，顶多有点相关性，相关系数还不是很高。</p>
</li>
<li>
<p>学位和学识也是两码事，即使读到头，不继续学习的话，马上知识就陈旧了。所谓逆水行舟，不进则退。其实这个比喻是有欠缺的，<strong>一般会认为水流速度是常数，但是请设想一下水流的速度是指数函数呢？</strong></p>
</li>
</ul>
<p class="more"><a href="posts/bulabula/weixue/">阅读更多…</a></p>
</div>
    </div>
    </article><article class="post h-entry post-text"><header><h1 class="post-title p-name"><a href="posts/bulabula/quanxue/" class="u-url">励志两则: 劝学</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Golden Grape</span></p>
            <p class="dateline"><a href="posts/bulabula/quanxue/" rel="bookmark"><time class="post-date published dt-published" datetime="2018-01-30T21:00:00+08:00" title="2018-01-30 21:00">2018-01-30 21:00</time></a></p>
        </div>
    </header><div class="p-summary entry-summary">
    <div>
<p>看到starnight做</p>
<blockquote>
<p><a href="https://twitter.com/StarKnight/status/958301772325429248">#推特小调查:
你读（读过）励志类书籍吗？</a></p>
</blockquote>
<p>蛤, 读过算什么, 我还写过呢. 来两篇以前的:</p>
<p>(写于2012年)
学习是个持续过程。</p>
<p>逆水行舟不进则退。逆水行舟不进则退还是不确切的，因为通常水流速度是常数。但是考虑人类的知识进展的速度，却可能是指数函数。也就是说，逆水行舟，水的速度是指数变化，这事想起来非常可怕。也许你现在每周需要看两篇文献能够保持在前沿的位置，18个月以后，是每周四篇，3年以后是每周8篇。。。20年以后，我们就必须用Matrix的upload功能来学习了。当然现在事情还没有那么夸张，不同领域的倍增时间并不相同。</p>
<p>我觉得自学，或者说自己对自己的继续教育是需要持续进行的。
</p>
<p class="more"><a href="posts/bulabula/quanxue/">阅读更多…</a></p>
</div>
    </div>
    </article><article class="post h-entry post-text"><header><h1 class="post-title p-name"><a href="posts/python/worldbank-data-cleaner/" class="u-url">世界银行数据清洗器</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Golden Grape</span></p>
            <p class="dateline"><a href="posts/python/worldbank-data-cleaner/" rel="bookmark"><time class="post-date published dt-published" datetime="2018-01-27T00:18:00+08:00" title="2018-01-27 00:18">2018-01-27 00:18</time></a></p>
        </div>
    </header><div class="p-summary entry-summary">
    <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="World-bank-data-cleaner">World bank data cleaner<a class="anchor-link" href="posts/python/worldbank-data-cleaner/#World-bank-data-cleaner">¶</a>
</h2>
<p>世界银行数据清洗工具.</p>
<p>世界银行有个开放的数据库<a href="http://data.worldbank.org">http://data.worldbank.org</a> 这个数据库很强大, 里面有各国各种经济数据. 我看了GDP, GDP年增长率, 税收, 税收占GDP百分比几个数据集, 发现里面的格式基本相同. 因此就可以统一清理数据了.</p>
<p>所以做了一个这样的简单清洗器. 两个函数:</p>
<ul>
<li>worldbank_data_reader(filename)用于读取原始数据, 因为读取一次文件的成本较高, 而处理的方式可以很多样, 所以建议先读取数据以后保存在一个dataframe中. </li>
<li>worldbank_data_cleaner(origin_df, countries="global", years=(1996,2006)): 对origin_df这个dataframe进行清洗, 提取出感兴趣的国家和感兴趣的年份, 返回出的Dataframe以年份作为index, 以国家名作为columns<ul>
<li>countries 默认为"global", 返回所有国家信息, 也可以使用列表指定感兴趣的国家名, 例如countries=["China","United States"], 注意使用正确的国家名称</li>
<li>years=(1996, 2006), 按照python的习惯, 返回自1996年至2006年前的数据, 也就是1996, 1997..2004, 2005年的数据. <p class="more"><a href="posts/python/worldbank-data-cleaner/">阅读更多…</a></p>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
    </div>
    </article><article class="post h-entry post-text"><header><h1 class="post-title p-name"><a href="posts/python/Ukraine-reduce-tax-problem/" class="u-url">乌克兰减税问题</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Golden Grape</span></p>
            <p class="dateline"><a href="posts/python/Ukraine-reduce-tax-problem/" rel="bookmark"><time class="post-date published dt-published" datetime="2018-01-26T01:15:00+08:00" title="2018-01-26 01:15">2018-01-26 01:15</time></a></p>
        </div>
    </header><div class="p-summary entry-summary">
    <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>在曼昆的_经济学原理_的第八章中, 讲解了税收与经济之间的关系. 当税率逐渐提高时, 税收的总额会先提高, 税率到达一定水平以后由于税收对经济的影响, 税收反而会下降. 这一变化过程称为拉伐曲线.</p>
<p>根据_经济学原理_中引用“The New York Times,November14.1996,p.D2.”的一篇文章中说, 在1996年之后, 乌克兰打算进行税收的改革, 大幅度减税, 并通过减税来刺激经济.</p>
<p>那么, 这个案例的结果是怎样的? 乌克兰是否按照计划进行了减税, 减税之后该国的经济是否发生了改善? 在这本书中并没有讲解.</p>
<p>本文通过世界银行中乌克兰以及周边前独联体国家的公开数据进行了初步的分析. </p>
<p class="more"><a href="posts/python/Ukraine-reduce-tax-problem/">阅读更多…</a></p>
</div>
</div>
</div>
</div>
</div>
    </div>
    </article><article class="post h-entry post-text"><header><h1 class="post-title p-name"><a href="posts/bulabula/how-to-inception/" class="u-url">如何向成人灌输一个观点</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Golden Grape</span></p>
            <p class="dateline"><a href="posts/bulabula/how-to-inception/" rel="bookmark"><time class="post-date published dt-published" datetime="2018-01-21T16:30:00+08:00" title="2018-01-21 16:30">2018-01-21 16:30</time></a></p>
        </div>
    </header><div class="p-summary entry-summary">
    <div>
<p>在上一篇<a href="posts/python/dejunkifying-a-plot">"统计图整理"</a>中, 展示了如何把一个具有浓郁乡土气息的bar
<img alt="p0" src="https://i.loli.net/2018/01/21/5a644e647a799.png">
变成性冷淡的bar:
<img alt="p7" src="https://i.loli.net/2018/01/21/5a644e64a71b6.png"></p>
<p>大家的反馈主要是对Remove lines到direct label的那一部分不认同. 也就是从去掉grid, 去掉座标轴, 到直接将数据标注到bar上.
<img alt="p5" src="https://i.loli.net/2018/01/21/5a644e64a705b.png"></p>
<p><img alt="p7" src="https://i.loli.net/2018/01/21/5a644e64a71b6.png"></p>
<p>专业设计师如西乔都认为<a href="https://twitter.com/arthur369/status/954825055908843521">"觉得水平线还是应该保留，目前有些影响可读性"</a>, 其实我也有类似的感觉. 很可能这是大多数人的感觉.</p>
<p>在<a href="posts/python/dejunkifying-a-plot">"统计图整理"</a>一文中我说,</p>
<blockquote>
<p>如果做乙方的话, 一定要花足够长的时间给甲方洗脑, 洗到less is more形成本能. 如果你省掉了什么时间, 一定会乘10花到工作时间上.</p>
</blockquote>
<p>我只讲了目的, 没有讲解方法. 作为完整的课程, cousera这门课不仅仅讲解了如何作图, 实际上还悄悄演示了如何"洗脑".
</p>
<p class="more"><a href="posts/bulabula/how-to-inception/">阅读更多…</a></p>
</div>
    </div>
    </article><article class="post h-entry post-text"><header><h1 class="post-title p-name"><a href="posts/python/dejunkifying-a-plot/" class="u-url">统计图清理</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Golden Grape</span></p>
            <p class="dateline"><a href="posts/python/dejunkifying-a-plot/" rel="bookmark"><time class="post-date published dt-published" datetime="2018-01-20T16:30:00+08:00" title="2018-01-20 16:30">2018-01-20 16:30</time></a></p>
        </div>
    </header><div class="p-summary entry-summary">
    <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>最近正在学<a href="https://www.coursera.org/learn/python-plotting/home/welcome">Applied Plotting, Charting &amp; Data Representation in Python</a>, 老师在第一周的课程中先讲了一遍统计图的审美, 其中有一段是展示如何将图中无用的部分清除, 所谓Dejunkify, 以强调显示主题. 感觉非常好. 完成第二周的作业后, 我应该是能够用matplotlib进行基本的画图了. 所以试着把这个例子重现一遍.</p>
<p>课程中的例子来自于<a href="https://www.darkhorseanalytics.com/blog/data-looks-better-naked">Dark Horse</a></p>
<blockquote>
<p>爱德华·图夫特（Edward Tufte）在他1983年经典的著作<a href="http://www.humanities.ufl.edu/pdf/tufte-aesthetics_and_technique.pdf">“量化信息的视觉显示”</a>（The Visual Display of Quantitative Information） 一书中指出：“数据墨水(Data-ink)是图像中不可抹去的核心，是为了反映数字的变化而安排的不可或缺的印迹”</p>
<p>Edward Tufte introduced the concept of data-ink in his 1983 classic The Visual Display of Quantitative Information. In it he states "Data-ink is the non-erasable core of the graphic, the non-redundant ink arranged in response to variation in the numbers represented" (emphasis mine).</p>
</blockquote>
<p>一个"好"的统计图, 应当是尽可能多的保留data ink, 尽可能少的chart junk. 这一段动画显示了如何把一个凌乱的统计图删减到只包含必要的"Data-ink"的过程. 
<img src="http://static1.squarespace.com/static/56713bf4dc5cb41142f28d1f/5671e8bf816924fc22651410/5671eae2816924fc2265189a/1450306274301/data-ink.gif" alt=""></p>
<p>接下来我试着用matplotlib重现这个过程, 也算是参照<a href="posts/python/cheatsheet/Matplotlib_cheat_sheet">matplotlib cheat sheet</a> 的一次练习. 
</p>
<p class="more"><a href="posts/python/dejunkifying-a-plot/">阅读更多…</a></p>
</div>
</div>
</div>
</div>
</div>
    </div>
    </article><article class="post h-entry post-text"><header><h1 class="post-title p-name"><a href="posts/python/cheatsheet/matplotlib-cheat-sheet/" class="u-url">Matplotlib Cheat Sheet</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Golden Grape</span></p>
            <p class="dateline"><a href="posts/python/cheatsheet/matplotlib-cheat-sheet/" rel="bookmark"><time class="post-date published dt-published" datetime="2018-01-20T02:30:00+08:00" title="2018-01-20 02:30">2018-01-20 02:30</time></a></p>
        </div>
    </header><div class="p-summary entry-summary">
    <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>来自于<a href="https://s3.amazonaws.com/assets.datacamp.com/blog_assets/Python_Matplotlib_Cheat_Sheet.pdf">datacamp</a>, 我觉得一大张PDF不方便. 给改写成jupyter的. 有可能以后再做成竖排的小册子, 方便查阅.</p>
<p>需要下载本文可以<a href="https://github.com/goldengrape/goldengrape.github.io/blob/gh-pages/posts/python/cheatsheet/Matplotlib_cheat_sheet.ipynb">点击此处</a></p>
<p class="more"><a href="posts/python/cheatsheet/matplotlib-cheat-sheet/">阅读更多…</a></p>
</div>
</div>
</div>
</div>
</div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-8.html" rel="prev">较新的文章</a>
            </li>
            <li class="next">
                <a href="index-6.html" rel="next">以前的文章</a>
            </li>
        </ul></nav><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha256-SDRP1VVYu+tgAGKhddBSl5+ezofHKZeI+OzxakbIe/Y=" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
    },
    displayAlign: 'center', // Change this to 'left' if you want left-aligned equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script><footer id="footer"><p>Contents © 2019         <a href="https://twitter.com/goldengrape">Golden Grape</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
    </div>
    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-113165714-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-113165714-1');
</script><script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("zh-cn");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
