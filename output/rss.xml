<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>GoldenGrape's Blog</title><link>https://goldengrape.github.io/</link><description>This is a blog site for GoldenGrape.</description><atom:link href="https://goldengrape.github.io/rss.xml" rel="self" type="application/rss+xml"></atom:link><language>zh_cn</language><copyright>Contents © 2018 &lt;a href="mailto:"&gt;Golden Grape&lt;/a&gt; </copyright><lastBuildDate>Mon, 15 Jan 2018 05:43:08 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>字符替换练习</title><link>https://goldengrape.github.io/posts/bulabula/eq-price/</link><dc:creator>Golden Grape</dc:creator><description>&lt;div tabindex="-1" id="notebook" class="border-box-sizing"&gt;
    &lt;div class="container" id="notebook-container"&gt;

&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;这是一个python正则表达式的练习:&lt;/p&gt;
&lt;p&gt;我恰好读到曼昆经济学原理中的一小段, 觉得用来练习正则表达式中的文本替换命令很有意思.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [1]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;content0&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'''&lt;/span&gt;
&lt;span class="s1"&gt;价格上限如何影响市场结果&lt;/span&gt;

&lt;span class="s1"&gt;...对冰激凌市场实行价格上限时，可能有两种结果。&lt;/span&gt;
&lt;span class="s1"&gt;'''&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;&lt;img src="https://goldengrape.github.io/images/eq_price.001.png" alt=""&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [2]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;content1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'''&lt;/span&gt;
&lt;span class="s1"&gt;在图6－l（a）幅中，政府实行每个冰激凌蛋卷为4美元的价格上限。&lt;/span&gt;
&lt;span class="s1"&gt;在这种情况下，由于使供求平衡的价格（3美元）低于上限，&lt;/span&gt;
&lt;span class="s1"&gt;价格上限没有限制作用。&lt;/span&gt;
&lt;span class="s1"&gt;市场力量自然而然地使经济向均衡变动，而且，价格上限没有影响。&lt;/span&gt;
&lt;span class="s1"&gt;'''&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;&lt;img src="https://goldengrape.github.io/images/eq_price.002.png" alt=""&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [5]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;content2&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'''&lt;/span&gt;
&lt;span class="s1"&gt;图6－l0(b)幅表示另一种结果，这种结果更令人感兴趣，也更可能。&lt;/span&gt;
&lt;span class="s1"&gt;在这种情况下，政府实行每个冰激凌蛋卷2美元的价格上限。&lt;/span&gt;
&lt;span class="s1"&gt;由于均衡价格3美元在价格上限之上，所以，价格上限对市场有一种限制性约束。&lt;/span&gt;
&lt;span class="s1"&gt;供求力量趋向于使价格向均衡变动，但当市场价格达到上限时，就不能再上升了。&lt;/span&gt;
&lt;span class="s1"&gt;因此，市场价格等于价格上限。&lt;/span&gt;
&lt;span class="s1"&gt;在这种价格时，冰激凌的需求量（图中的125个）超过了供给量（75个）。&lt;/span&gt;
&lt;span class="s1"&gt;存在冰激凌短缺，因此，一些在现行价格时想买冰激凌的人买不到。&lt;/span&gt;

&lt;span class="s1"&gt;当冰激凌短缺的形成是由于这种价格上限时，&lt;/span&gt;
&lt;span class="s1"&gt;一些配给冰激凌的机制自然就会出现。&lt;/span&gt;

&lt;span class="s1"&gt;这种机制可能是排长队：&lt;/span&gt;
&lt;span class="s1"&gt;那些愿意提前来到并排队等候的人得到一个冰激凌，&lt;/span&gt;
&lt;span class="s1"&gt;而另一些不愿意等候的人得不到。&lt;/span&gt;

&lt;span class="s1"&gt;另一种方法是，&lt;/span&gt;
&lt;span class="s1"&gt;卖者可以根据他们自己的偏好来配给冰激凌，&lt;/span&gt;
&lt;span class="s1"&gt;只卖给朋友、亲戚或同一种族或民族的成员。&lt;/span&gt;

&lt;span class="s1"&gt;要注意的是，&lt;/span&gt;
&lt;span class="s1"&gt;尽管价格上限是由帮助冰激凌买者的愿望而促成的，&lt;/span&gt;
&lt;span class="s1"&gt;但并不是所有买者都能从这种政策中受益。&lt;/span&gt;
&lt;span class="s1"&gt;一些买者尽管不得不排队等候，但以较低的价格得到冰激凌，&lt;/span&gt;
&lt;span class="s1"&gt;而另一些买者根本得不到任何冰激凌。&lt;/span&gt;

&lt;span class="s1"&gt;冰激凌市场的这个例子说明了一个一般规律：&lt;/span&gt;
&lt;span class="s1"&gt;当政府对竞争市场实行限制性价格上限时，就产生了物品的短缺，&lt;/span&gt;
&lt;span class="s1"&gt;而且，卖者必然在大量潜在买者中配给稀缺物品。&lt;/span&gt;

&lt;span class="s1"&gt;这种价格上限之下产生的配给机制很少是合意的。&lt;/span&gt;
&lt;span class="s1"&gt;排长队是无效率的，因为这样做浪费了买者的时间。&lt;/span&gt;
&lt;span class="s1"&gt;根据卖者偏好的歧视&lt;/span&gt;
&lt;span class="s1"&gt;既无效率（因为物品并没有给予对它评价最高的买者）&lt;/span&gt;
&lt;span class="s1"&gt;又可能是不公正的。&lt;/span&gt;

&lt;span class="s1"&gt;与此相比，一个自由竞争市场中的配给机制既有效率又客观。&lt;/span&gt;
&lt;span class="s1"&gt;当冰激凌市场达到均衡时，&lt;/span&gt;
&lt;span class="s1"&gt;任何一个想支付市场价格的人都可以得到一个冰激凌蛋卷。&lt;/span&gt;
&lt;span class="s1"&gt;自由市场用价格来配给物品。&lt;/span&gt;

&lt;span class="s1"&gt;摘录来自: [美]N·格里高利·曼昆. “经济学原理”&lt;/span&gt;

&lt;span class="s1"&gt;'''&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="文本替换"&gt;文本替换&lt;a class="anchor-link" href="https://goldengrape.github.io/posts/bulabula/eq-price/#%E6%96%87%E6%9C%AC%E6%9B%BF%E6%8D%A2"&gt;¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;2017-18年的秋冬, 有一场很厉害的流感, 导致各个医院儿科爆满. 一时间各种分析很多. 让我们看看曼昆怎么说的.&lt;/p&gt;
&lt;p&gt;看曼昆对此事的看法, 不妨简单使用文本替换, 将例子中的名词替换成实际生活中的名词&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [9]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;re&lt;/span&gt;
&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;content0&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;content1&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;content2&lt;/span&gt;
&lt;span class="n"&gt;new_content&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'冰激凌蛋卷'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"儿科医生"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                    &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"冰激凌市场"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"儿科医疗市场"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                    &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"冰激凌"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;    &lt;span class="s2"&gt;"儿科医生"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                    &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"物品"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"医疗服务"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                    &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'买者'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"患儿家长"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                    &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'卖者'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'儿科医院或医生'&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;new_content&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;
&lt;div class="prompt"&gt;&lt;/div&gt;

&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;
价格上限如何影响市场结果

...对儿科医疗市场实行价格上限时，可能有两种结果。

在图6－l（a）幅中，政府实行每个儿科医生为4美元的价格上限。
在这种情况下，由于使供求平衡的价格（3美元）低于上限，价格上限没有限制作用。
市场力量自然而然地使经济向均衡变动，而且，价格上限没有影响。

图6－l0(b)幅表示另一种结果，这种结果更令人感兴趣，也更可能。
在这种情况下，政府实行每个儿科医生2美元的价格上限。
由于均衡价格3美元在价格上限之上，所以，价格上限对市场有一种限制性约束。
供求力量趋向于使价格向均衡变动，但当市场价格达到上限时，就不能再上升了。
因此，市场价格等于价格上限。
在这种价格时，儿科医生的需求量（图中的125个）超过了供给量（75个）。
存在儿科医生短缺，因此，一些在现行价格时想买儿科医生的人买不到。

当儿科医生短缺的形成是由于这种价格上限时，
一些配给儿科医生的机制自然就会出现。

这种机制可能是排长队：
那些愿意提前来到并排队等候的人得到一个儿科医生，
而另一些不愿意等候的人得不到。

另一种方法是，
儿科医院或医生可以根据他们自己的偏好来配给儿科医生，
只卖给朋友、亲戚或同一种族或民族的成员。

要注意的是，
尽管价格上限是由帮助儿科医生患儿家长的愿望而促成的，
但并不是所有患儿家长都能从这种政策中受益。
一些患儿家长尽管不得不排队等候，但以较低的价格得到儿科医生，
而另一些患儿家长根本得不到任何儿科医生。

儿科医疗市场的这个例子说明了一个一般规律：
当政府对竞争市场实行限制性价格上限时，就产生了医疗服务的短缺，
而且，儿科医院或医生必然在大量潜在患儿家长中配给稀缺医疗服务。

这种价格上限之下产生的配给机制很少是合意的。
排长队是无效率的，因为这样做浪费了患儿家长的时间。
根据儿科医院或医生偏好的歧视
既无效率（因为医疗服务并没有给予对它评价最高的患儿家长）
又可能是不公正的。

与此相比，一个自由竞争市场中的配给机制既有效率又客观。
当儿科医疗市场达到均衡时，
任何一个想支付市场价格的人都可以得到一个儿科医生。
自由市场用价格来配给医疗服务。

摘录来自: [美]N·格里高利·曼昆. “经济学原理”


&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;hr&gt;
&lt;p&gt;读起来好像还很通顺的. 我隐约记得高中政治经济学里面还是讲过基本的供求曲线的.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [ ]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt; 
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
</description><guid>https://goldengrape.github.io/posts/bulabula/eq-price/</guid><pubDate>Mon, 15 Jan 2018 05:20:34 GMT</pubDate></item><item><title>双人游戏的必胜招</title><link>https://goldengrape.github.io/posts/bulabula/zermelo-theorem/</link><dc:creator>Golden Grape</dc:creator><description>&lt;div&gt;&lt;p&gt;该篇复习于2011年. 今天看到&lt;a href="https://twitter.com/gttnnn"&gt;如月中天&lt;/a&gt;提到&lt;a href="https://twitter.com/gttnnn/status/952744005934051328"&gt;"胜也罢，败也罢，就是不要同他讲和！"&lt;/a&gt;, 不知怎么, 突然想起这个双人游戏是可能有必胜招的, 还有一个华丽的证明, 然后自己又不记得了. 赶紧搜索了一下, 发现以前记录过.&lt;/p&gt;
&lt;!-- TEASER_END --&gt;

&lt;hr&gt;
&lt;p&gt;zermelo's theorem 实在太帅了。看了耶鲁公开课博弈论第15集，终于揭开了从大一开始困扰我的谜题。大一的时候舒幼生教授一次很淡定的说，一个双人棋类游戏，如果没有平局，那么一定有必胜招。当时我就很迷惑，但他没给出证明。过了13年，我终于见到了证明。实在激动，记录一下。&lt;/p&gt;
&lt;h2&gt;zermelo's theorem&lt;/h2&gt;
&lt;p&gt;这个定律的全名叫做zermelo's theorem。具体描述是：&lt;/p&gt;
&lt;p&gt;在一个双人游戏中，满足：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;双人轮流行动&lt;/li&gt;
&lt;li&gt;有限步。比如国际象棋好像重复出现六次相同的棋局判和&lt;/li&gt;
&lt;li&gt;信息完备。所谓信息完备，大概是玩家明确知道所有之前的步骤。&lt;/li&gt;
&lt;li&gt;仅有3种结局，对于玩家1只有：赢，和，输三种结局&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;当满足上述条件的游戏，只会出现下面情况之一：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;玩家1有必胜招。就是玩家1按照某种特定的走法，不论玩家2如何努力，玩家1都可以赢&lt;/li&gt;
&lt;li&gt;玩家1有必和招。&lt;/li&gt;
&lt;li&gt;玩家2有必胜招。当然，有些游戏是有后手优势的，先走的人倒霉。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这个定律的证明相当华丽，建议每一个理科geek前去欣赏，可自行google "公开课 博弈论 15"查看视频.&lt;/p&gt;
&lt;h2&gt;证明&lt;/h2&gt;
&lt;p&gt;在此简单记叙一下，权作笔记。&lt;/p&gt;
&lt;p&gt;N是某一游戏的最大步长，比如我们下棋，玩很多很多次，其中最多回合的一次，是大战300回合后我赢了，那么N=600。&lt;/p&gt;
&lt;h3&gt;数学归纳法第一步：&lt;/h3&gt;
&lt;p&gt;N=1时，zermelo's theorem显然成立。&lt;/p&gt;
&lt;p&gt;玩家1，只用走一步，就可决定输赢。按照游戏的规定，也许有胜负和三种，那么玩家1显然选择胜的走法，于是满足玩家1有必胜招&lt;/p&gt;
&lt;h3&gt;数学归纳法第二步：&lt;/h3&gt;
&lt;p&gt;假设i&amp;lt;=N时命题成立&lt;/p&gt;
&lt;h3&gt;数学归纳法第三步：&lt;/h3&gt;
&lt;p&gt;试图证明i=N+1时命题成立&lt;/p&gt;
&lt;p&gt;考虑N+1时的子游戏，除去玩家1走的第一步以后的游戏部分。玩家1第一步的每一种走法都会产生一个新游戏起始状态，它的最大步长&amp;lt;=N的，从数学归纳法第二步可知，每个子游戏有唯一确定的结果，玩家1必然会赢、输或者和。于是等价于N=1的情况了！相当于玩家1在第一步的时候来选择进入哪个游戏，是自己必赢还是必输还是必和。&lt;/p&gt;
&lt;p&gt;这个证明的华丽之处在于，我在想N+1的时候，默认的想法是在游戏树后面再加一层，于是很多年都想不出来，而这个证明是在游戏树前面加上了一个树根。在看到这个证明之前，我根本就没有意识到自己有这样的思维定势。&lt;/p&gt;&lt;/div&gt;</description><category>生活方式</category><guid>https://goldengrape.github.io/posts/bulabula/zermelo-theorem/</guid><pubDate>Mon, 15 Jan 2018 04:00:00 GMT</pubDate></item><item><title>生活中的定量</title><link>https://goldengrape.github.io/posts/bulabula/quantity-life/</link><dc:creator>Golden Grape</dc:creator><description>&lt;div&gt;&lt;p&gt;"能度量方是合理, 合理性才能存在"-- 张系国《超人列传》&lt;/p&gt;
&lt;p&gt;生活中度量的意义在于使事情可重复. 可重复的才是可控制和可改进的. 可改进则可以达到当前条件下的最优化, 一旦找到最优解就不需要再动脑子了, 除非环境条件发生变化. 省心.&lt;/p&gt;
&lt;!-- TEASER_END --&gt;

&lt;h2&gt;无明火&lt;/h2&gt;
&lt;p&gt;火是不可度量的. 我家已经取消了用明火做菜做饭. 一切加热源必须能够并且一定要设置定时. 这样在人离开的时候才能有安全感.&lt;/p&gt;
&lt;p&gt;现在家里做饭做菜是电磁炉, 电蒸烤炉, 电饭锅, 微波炉和温控热得快. 除了极其罕见地用电磁炉炒, 其他的方式: 蒸/煮/烤/空气炸/微波加热/炖, 这些都有一个共同特点是可以无人值守, 把食材放入设定好参数, 人就可以离开了.&lt;/p&gt;
&lt;h2&gt;厨房电子称&lt;/h2&gt;
&lt;p&gt;做饭一定要称量的, 前几天看了个教做中国菜的视频推号, 里面不断在说"少许", "适量", 简直不能忍, 看一次就unfo了. 称量能够使每一次烹饪是可重复的,&lt;/p&gt;
&lt;p&gt;比如, 双人份米饭: (90g大米+30g杂粮)[误差1g]+(520-120)g水[误差20g]. 注意做饭使用量筒是不合适的, 对于水虽然问题不大, 但对于米的误差太大.&lt;/p&gt;
&lt;p&gt;称量以后不会有剩菜剩饭, 吃多少, 各种种类是什么心中有数. 控制体重第一步就是买个电子称.&lt;/p&gt;
&lt;h2&gt;喷雾瓶&lt;/h2&gt;
&lt;p&gt;我对咖啡因敏感, 喝完以后就睡不着觉. 但如果长时间开车, 还是需要在路上提神, 需要摄入一些咖啡因. 我的方法是这样的: 用小的喷雾瓶装上零度可乐, 开车的时候拿出来在舌下喷几下.&lt;/p&gt;
&lt;p&gt;虽然缺乏数据, 但个人感觉零度可乐的咖啡因含量挺高, 无糖, 所以不那么粘稠, 自带防腐剂. 因此分装以后放车里也不容易变质, 不慎洒出来一些也不至于黏糊糊的(与可乐/红牛相比).&lt;/p&gt;
&lt;p&gt;舌下吸收避免首过效应, 起效快, 相对来说用量也较少.&lt;/p&gt;
&lt;p&gt;关于咖啡因. 咖啡因长期摄入受体是下调的, 很多人夜里喝咖啡晚上照样睡得安稳, 白天不喝咖啡就困得不行. 其实不喝咖啡的困倦不是因为咖啡提神, 而是更接近于戒断反应.&lt;/p&gt;
&lt;h2&gt;起泡瓶&lt;/h2&gt;
&lt;p&gt;最开始发现这个是因为买了一瓶舒肤佳的泡沫洗手液, 用完以后发现把常规的洗手液1:10稀释以后灌进起泡瓶也有同样的作用. 大概一年了, 再没买过舒肤佳的泡沫洗手液, 一直用蓝月亮洗手液补充装的兑水. 而且蓝月亮洗手液补充装也还有多半袋. 预计下一次买洗手液得是两年以后了.&lt;/p&gt;
&lt;p&gt;现在已经扩展到家里的洗涤灵, 浴液, 洗发水和消毒液了.&lt;/p&gt;
&lt;p&gt;最早搞泡沫洗手液的产品经理, 真是行业公敌啊.&lt;/p&gt;
&lt;h2&gt;按压瓶&lt;/h2&gt;
&lt;p&gt;与洗手液类似的按压瓶, 我用来装漱口水了. 漱口水原装的那个大瓶盖, 说是当量杯用, 其实太大太大, 误差也太大太大. 而且接触完嘴唇再拧回到大瓶上, 虽说是杀菌剂, 也是污染呐.&lt;/p&gt;
&lt;p&gt;按压瓶, 张嘴, 伸到嘴边, 按4次, 无接触, 够用.&lt;/p&gt;
&lt;h2&gt;低温烹饪, 分装与冷冻&lt;/h2&gt;
&lt;p&gt;火候, 就是温度对于时间的函数.&lt;/p&gt;
&lt;p&gt;温度的精度控制越高, 对时间的精度反而可以要求更低. 60度煮牛肉, 4小时和6小时甚至和12小时之间差别也不算大. 而且对于60度的水浴来说, 不论水还是空气, 体积变化都不明显, 不至于溢出到锅外面. 于是, 这样就不用担心什么, 即使忘记了或者临时有事出门, 也不至于发生什么危险.&lt;/p&gt;
&lt;p&gt;低温烹饪的另一个好处就是可以一次做很多, 然后分装, 冷冻. 这样操作更有效率, 平均到每一餐来说花费的时间就更少. &lt;/p&gt;
&lt;!-- EOF --&gt;&lt;/div&gt;</description><category>生活方式</category><guid>https://goldengrape.github.io/posts/bulabula/quantity-life/</guid><pubDate>Sun, 14 Jan 2018 16:20:00 GMT</pubDate></item><item><title>如何看病</title><link>https://goldengrape.github.io/posts/ophthalmology/How-to-see-a-doctor/</link><dc:creator>Golden Grape</dc:creator><description>&lt;div&gt;&lt;p&gt;这篇是2011年的文章了, 很遗憾到了2018年仍然适用, 没有过时. 初始的版本用词更凶一些. 经过果壳网袁玥老师的修改之后温柔了许多. 这次贴进来, 还补充了番外篇.&lt;/p&gt;
&lt;p&gt;2017年时, 极其自恋地搜索了一下&amp;lt;如何看病&amp;gt;, 好有趣,在公众号, 还有国医什么什么的公众号转载, 规规矩矩署名的. 在网页上, 有个耳鼻喉大夫转载时, 把里面眼科的例子全都自己改成了耳鼻喉的例子.&lt;/p&gt;
&lt;p&gt;创作共用果然是个好协议&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;本文遵守创作共用-署名协议，欢迎传播
您可以自由：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;复制、发行、展览、表演、放映、广播或通过信息网络传播本作品&lt;/li&gt;
&lt;li&gt;创作演绎作品&lt;/li&gt;
&lt;li&gt;对本作品进行商业性使用
惟须遵守下列条件：&lt;/li&gt;
&lt;li&gt;署名 — 您必须按照作者或者许可人指定的方式对作品进行署名。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;如何看病（－）：该看不该看&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;我不想讨论医疗制度如何如何，只是在现有的条件下，尽可能帮助需要医疗救助的人，使人们看病的效率更高。&lt;/li&gt;
&lt;li&gt;请质疑任何从网络上获取的医学知识，包括本blog&lt;/li&gt;
&lt;li&gt;欢迎传播&lt;/li&gt;
&lt;/ol&gt;
&lt;!-- TEASER_END --&gt;

&lt;p&gt;问题1: 该看不该看&lt;/p&gt;
&lt;p&gt;人的身体是有自我修复能力的。而且这种能力很强，显然比电脑和汽车厉害。有些疾病并不需要治疗，有些疾病是有“自限性”的——也就是时间到了自己就好了。
不过，能够发生在人身上的疾病，也是伴随人类进化了同样长的时间，也不是等闲之辈。&lt;/p&gt;
&lt;p&gt;如果自己身体不适，是扛着，还是去医院就诊。这是个问题。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;如果器官的功能受损，需要立即就诊：
眼睛的功能是用来看东西的，突然看不见了，应该马上看医生。同理，突然听不见了，四肢运动突然出现障碍。。。值得注意的是，人类有许多器官是双份的，比如眼睛、耳朵。。有些人一只眼睛的视力突然下降，另一只却完好，有可能忽略了坏眼的问题。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;不能忍受的疼痛。
疼痛是身体发出的火警，不要去挑战疼痛。如果遇到不能忍受的疼痛，应该尽快就诊。比如腹痛、胸痛、眼痛。需要提示的是，即使你到了医院，通常医生也不会立即给你止痛。疼痛是火警，是了解身体状况的重要信号，没有人会在消灭火灾之前，先把附近的电话线都砍了。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;反复发作的不适
老毛病了，忍忍就过去了——大部分的癌症就是这样度过了无人骚扰的童年期。对于反复出现的不适，应该认真注意诱发的原因、缓解的方式。
对了，最重要的是——自己的年龄，&amp;gt;50岁的，最好去看看，免除后患。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;已经处于某个疾病进程中，但是感觉突然发生了变化。
大夫可能已经告诉你这个病没什么，过几天自己就能好，开始的时候，感觉也是一天比一天好，可是今天突然恶化了，那么最好再去复查一下。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;别人看出来的疾病
通常不用着急，人类的身体有发达的自我检测系统，如果自己没有什么不舒服的感觉，多半没有太大的问题。（注意：医生经过身体检查发现的除外，比如身体上的包块之类的）
典型的是结膜下出血。一般是“白眼珠”上有鲜红的血迹，自己毫无感觉，不疼不痒视力不降，通常是照镜子或者是被其他人发现，这种不是“眼底出血”，这种是“白眼珠”上的细小血管破了，跟磕青了没什么区别。咳嗽、便秘、揉眼睛。。。都可能引起。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;定期体检是必要的。
自己的身体只有自己保护，兄弟靠不住、组织靠不住。&lt;/p&gt;
&lt;h2&gt;如何看病（二）：急诊还是门诊？&lt;/h2&gt;
&lt;p&gt;一般医院都有急诊和门诊。
急诊是给紧急需要救治的病人准备的。
门诊则是给不那么紧急的病人准备的。&lt;/p&gt;
&lt;p&gt;急诊的设置是为了使病人在短时间内脱离危险，因此配备的药品都是应急的、速效的，配备的检查手段也是基本的，能够快速做出判断的。&lt;/p&gt;
&lt;p&gt;所以，如果你得的是不那么紧急的病，甚至是慢性病，其实在急诊，并没有针对你的病的疗效好副作用小的药品，而且化验检查并不是很全，辅助检查的设备也不是都能做的。&lt;/p&gt;
&lt;p&gt;不要仅仅因为白天上班，不好请假，而在晚上去看急诊。你得不到最好的药物，不能完成最好的化验检查和辅助检查。身体是自己的，工作是国家或者资本家的。仅仅为了不请假而在晚上看急诊，你为了节省一天的工资而放弃给自己最佳的诊断和治疗，又侵占了分配给急症患者的医疗资源，是损人不利己。。&lt;/p&gt;
&lt;p&gt;需要去急诊看的病：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;刚刚发生的疾病。
一个病已经得了三天了，还跑到急诊去看，我会态度很好的在心里痛骂。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;这个疾病可能在8小时内使器官的功能造成不可逆的损害。
严格一点，需要急诊处理的眼病只有：视网膜中央动脉阻塞（需要在10分钟内救治）、眼球破裂伤、急性闭角型青光眼急性发作。（补充下，还有化学伤、烧伤等等。）
突然发作的腹痛、胸痛、眼痛、头痛，还是应该到急诊看看先。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;如何看病（三）：看门诊的时间&lt;/h2&gt;
&lt;p&gt;我国是地大物博人口众多，很小的可能性，乘以13亿，都是无比巨大的数字。
任何你觉得合适的时间，一定是门诊人多的时间。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;一定要避开三个的时间：
星期一上午，星期一上午，星期一上午
只能用人海茫茫来形容。
为了您和家人的健康，请不要在星期一上午看病
请转告您周围的人，“为了您和家人的健康，请不要在星期一上午看病”，并请他们也转告周围的人。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;通常来说上午看病的人多，下午少，周一多，周五少。到了周五的下午，基本看病的人就很少了。看来辛勤的工作有益于身体健康。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;季节性
放假了去配个眼镜吧——老老实实排队吧
等天凉快了再做这个手术吧——老老实实排队吧
等放假休息有时间了再去看这个病吧——老老实实排队吧&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;恶劣的天气
刮风下雨是看病的最佳时机，雨越大，人越少。其实，天气对许多人的出行，并没有太大影响，如果工作很忙，需要在短时间内看个病，然后赶紧回去上班，最好是在下雨的天气去看病。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;如何看病（四）：看病前的准备&lt;/h2&gt;
&lt;p&gt;相信您已经选择好了看病的日期，下面介绍一下看病前的准备。&lt;/p&gt;
&lt;h3&gt;回顾历史：&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;请在看病之前，回顾一下您的病史，从什么时候开始发病？发病的时候自己有什么感觉？如果有时间，请用本子和笔写下来。&lt;/li&gt;
&lt;li&gt;回想一下是否对药物过敏。药物过敏史对于医生非常重要。如果您在以前用某种药物出现过严重的不良反应，请记录下来，在看病的时候向您的医生咨询是否属于药物过敏，如果是的，请医生在您最常用的病历封面上写下过敏的药物名称。&lt;/li&gt;
&lt;li&gt;回忆一下曾经接受过的治疗，以及正在使用的药物，和它们的商品名称。如果您还能找到药物的说明书或者空的药瓶或者剩余的药物，请带上它们。&lt;/li&gt;
&lt;li&gt;带齐以前的病历记录，曾经做过的检查结果。每次看过病后，也请收好所有的检查结果和病历，有些检查结果是由热敏打印，时间久了容易褪色，请复印一份保存。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;准备行政用品：&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;带上信用卡和足够的现金，有些医院不支持刷卡，而取款机前面排队的人可能很多。注意看管好自己的随身财物。如果您是小偷，盗亦有道，请勿在医院行窃。&lt;/li&gt;
&lt;li&gt;带好身份证、社保卡、医疗蓝本、退休证、离休证、医院的就诊卡等等一切跟医保可能有关系的东西。平时除了身份证，这些东西最好专门使用一个透明塑料文件袋放在一起。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;安排好病假当天的事务：&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;请好病假，安排好当日的工作。工作是国家的或者资本家的，身体是自己的，只要不给同事添麻烦，离开工作岗位是没有问题的。&lt;/li&gt;
&lt;li&gt;如果是去看急诊或者自觉比较严重的器官功能问题，比如严重的心前区疼痛、视力突然丧失等，带上手机和充电器，您有可能会需要住院或者留院观察。&lt;/li&gt;
&lt;li&gt;最好能够找个比您更健康的伙伴陪同您去看病。&lt;/li&gt;
&lt;li&gt;预计前往的时间，不要在上午11点以后，或者下午4点以后才去医院挂号。因为，恐怕没有号了，或者虽然看了医生，但是到需要做检查的时候，已经过了下班时间，其他的科室已经没人了。&lt;/li&gt;
&lt;li&gt;估计一下交通情况，选择合适的交通工具。最好不要自己开车或者骑车，请打车前往医院。一是医院附近很难停车，停车费高昂，二是您接受的某些治疗可能再不适合开车或者骑车。&lt;/li&gt;
&lt;li&gt;查询一下当日的天气。天气越恶劣，看病的人越少。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;选择合适的医院：&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;如果您已经具有相当的医学知识，您可以根据自己的病情来选择医院。&lt;/li&gt;
&lt;li&gt;一般社区医院和二级医院都非常的清净，去看病取药会很舒适。建议您首先去社区医院或者临近的二级医院就诊，至少可以获得相应的医学建议和转诊建议。如果您对这些医院的医疗质量不放心，也可以事先咨询一下有医学背景的朋友，去哪里看比较好。&lt;/li&gt;
&lt;li&gt;当您选择了三级甲等医院看病，也就意味着选择挂号难、看病难。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;挂号&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;没什么好说的，太难了，甚至对于医生自己看病也很困难。如果是外地病人到另一个城市看病，而且要看某个特定的专家，试试提前在网上预约之类的方法，免得到了以后挂不上号，要等几天甚至一周，在北京最低的生活费也是100元/天，一旦等起来消费惊人。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;调整心情&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;得病不是一件愉快的事情。但是人总是会生病的，迟早也是要病死的。所以疾病降临到自己身上，也没什么好抱怨的。&lt;/li&gt;
&lt;li&gt;去医院看病，并不能一定能够治好。实际上，给您看病的医生，最后一定看不好他自己的病，100%是病死的。&lt;/li&gt;
&lt;li&gt;与您的医生合作，共同对抗您的疾病。&lt;/li&gt;
&lt;li&gt;《史记•扁鹊仓公列传》“故病有六不治：骄恣不论于理，一不治也；轻身重财，二不治也；衣食不能适，三不治也；阴阳并，脏气不定，四不治也；形羸不能服药，五不治也；信巫不信医，六不治也。”翻译成白话文就是：一是狂妄、骄横、不讲道理的人；二是只重视钱财而不重视养生的人；三是对服饰、饮食、药物等过于挑剔、不能适应的人；四是体内气血错乱、脏腑功能严重衰竭的人；五是身体极度羸弱、不能服药或不能承受药力的人；六是只相信鬼神、不信任医学的人。对于属于上述六种情况之一的人，他们的疾病不论中医还是西医都很难治好。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;穿着打扮&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;不要化妆。也许您会有面色苍白、黑眼圈。这些都没关系，这些恰恰是医生需要看到的。即便是去看那个很帅或者很漂亮的医生。&lt;/li&gt;
&lt;li&gt;尽量穿容易穿脱的衣物，比如上衣建议是开襟的衣服，而不是套头的衣服。&lt;/li&gt;
&lt;li&gt;袖子要比较容易的挽起来或者脱下。比如冬天，最好穿厚实的大衣，而里面穿相对薄一些的衣服。&lt;/li&gt;
&lt;li&gt;口罩。如果有的话戴上，医院是疾病最集中的地方。本来您就处于比较虚弱的疾病状态，不要再感染了其他的疾病。口罩从医院回来以后要清洗，手也要好好洗。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;检查确认上面的各种准备事项，带齐所有的东西，出发。如果能战胜疾病，就借助医生的力量一起战胜它，如果不能战胜疾病，那么从医生那里学会如何与自己的疾病共存。&lt;/p&gt;
&lt;h2&gt;如何看病（五） 怎样与医生交流&lt;/h2&gt;
&lt;h3&gt;您与门诊医生接触的时间&lt;/h3&gt;
&lt;p&gt;如前所述，当您选择了就诊于三级甲等医院的时候，您也就选择了挂号难和看病难。同时也意味着其他的病人也同样面临挂号难和看病难的问题。为了尽可能的缓解这些问题，一位医生会在出诊时间内看尽可能多的病人，特别是专家，有可能今天额定的挂号量是看20位病人，但是通常会因为外地病人、可怜的病人、重症的病人、有权有势惹不起的病人而加号到30甚至40个。如果上午的门诊是30人，从早上8点看到12点，共4小时，中间没有喝水上厕所的时间，那么平均接待每位病人的时间是4*60/30=8分钟。不错，这就是您凌晨爬起来，裹着军大衣在医院挂号室门外在寒风中等了三个小时以后挂上号，又从上班起等了3小时以后换来的就诊时间，8分钟，平均值。&lt;/p&gt;
&lt;p&gt;还不够准确，这8分钟并不是您坐在诊室内和医生交流的时间，在形成初步诊断以后，医生会给您安排一些检查，大多数是当天就能够完成的，所以您拿着化验单检查单做完检查以后回到医生那里，还要再给他看结果。想必您已经注意到了，在您等候过程中，总有些人没拿着挂号条就冲进了医生的诊室，其实那些很可能是做完检查给医生看结果的病人。&lt;/p&gt;
&lt;p&gt;也许您会非常好心地帮助医生维持就诊的秩序，坚决制止那些加塞儿的人。我建议尽可能在诊室外进行，也许您一把拽出来的是那个刚刚跑了几层楼憋了半天尿才做完B超想拿给医生看结果的病人，他也只有平均8分钟的时间与医生交流。&lt;/p&gt;
&lt;h3&gt;与医生说话&lt;/h3&gt;
&lt;p&gt;不论您是看中医还是看西医，中医讲究望闻问切，西医讲究问病史和查体。医生都需要和您交谈才能够知道您的疾病是怎样的。我们的身体里布满了各种自检的信号线，它们会将身体的损伤通过它们自己的语言向您的大脑做汇报，比如疼痛、酸胀、无力、烧灼感、异物感。请向医生报告这些感觉，他才能帮助您。&lt;/p&gt;
&lt;p&gt;中医不是仅仅切脉就可以摸出您是什么病，西医也不是仅仅靠CT、B超、化验单就可以知道您是什么病。诊断疾病就像是CSI做调查，全面的证据才能指认真凶。
虽然很少，但是确实有一些病人到医生面前一句话不说，手一伸或者脸一挺，医生要先猜出他的主要症状和不舒服，说对了以后，他才继续看病。从前我出门诊，在相对闲适心情也不错的时候会陪着他们玩一会，答对的话他们 会很心服口服的。&lt;/p&gt;
&lt;p&gt;另一种人很多，他们会不断的陈述。比如，"我从20年前就开始胸闷了，那正是小平同志南巡的那一年啊，改革开放以来……"有时候这种倾诉是不自觉的，尤其是老年人。老年人必须依靠事件来回忆时间顺序，所以我在《看病前的准备》里写需要事先回忆一下病史，并且记录下来。当倾诉与疾病无关的时候，医生会打断您，或者是您的长辈，这不是不尊重或者态度不好，而是您只有8分钟。&lt;/p&gt;
&lt;h3&gt;区分事实和判断&lt;/h3&gt;
&lt;p&gt;请尽可能学会区分陈述事实和判断，区分这两点是需要极高的知识和智力的，而且稍微不小心即使具有极高知识和智力的人也可能混淆。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如下是事实陈述：“我眼睛红”，“我发烧最高到39度”，“我嗓子疼”&lt;/li&gt;
&lt;li&gt;如下是判断陈述：“我眼睛发炎了”，“我发烧很高”，“我上火了”&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;除非是在精神科或者心理门诊，否则请您尽可能陈述事实。&lt;/p&gt;
&lt;p&gt;对于您的感受，请按照不舒服发生的感觉或者表现，以及它们发生的时间来描述，比如“尿尿尿不出来3天”是非常好的描述，而“尿不出来很久了”则仍然没有给医生提供足够的信息。我的建议是&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;慢性病请精确到年或者月，比如“运动后胸闷5年”，&lt;/li&gt;
&lt;li&gt;近1-2年发病的，请精确到月，比如“双眼视力下降6个月”&lt;/li&gt;
&lt;li&gt;近1个月内发病的，请精确到日，比如 “尿尿尿不出来3天”&lt;/li&gt;
&lt;li&gt;急性病请精确到小时，比如“左眼前发黑看不见东西1小时”。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果您有数字能够描述您的病情，请尽可能告诉医生数字。比如，“这个星期我的血糖最高到过13”，但如果您仅仅说“这个星期我的血糖很高”，那得看您跟谁比了。对于医生的提问，特别是有“多少”这样的关键词的提问，请尽量以数字回答。不过很遗憾，通常当我问起“您得高血压多少年了？” 80%以上的回答是“很久了”。&lt;/p&gt;
&lt;h3&gt;疼痛与痛苦&lt;/h3&gt;
&lt;p&gt;看病，哪怕是急诊，医生不会马上给您解除痛苦。&lt;/p&gt;
&lt;p&gt;疼痛，是大自然赐给人类的礼物，虽然那是无人想要的礼物。疼痛是身体发出的火警，是诊断疾病和判断疾病进展的重要信号，是您生病的身体部分直接向医生的报告。在没有明确诊断之前，医生是不能够帮病人止痛的，就好像没有查明报告火警的位置，我们不可能把火警的电话轻易挂掉。也许您或者您的家人在检查床上疼得死去活来，医生还是会冷漠的用手摸这摸那，甚至使劲压一下问您是否更疼，此时也请告诉医生您的感受。&lt;/p&gt;
&lt;p&gt;另外，值得说明的一点，也需要向低年医生强调的一点是，那种显示出痛苦，大声叫嚷的病人，另一方面也说明他们有强大的生命力，而另一类苍白的悄无声息的病人，却更有可能有生命危险。所以当您在急诊看到医生不顾您大声叫嚷的同伴，而去看另一个悄无声息的病人时，不要去阻挡医生。&lt;/p&gt;
&lt;h3&gt;态度&lt;/h3&gt;
&lt;p&gt;如果您收入不高，生活不充裕，请直接跟医生说，相信很多医生会和我一样给您选择相对便宜的药品和治疗。不过同时相对便宜的药物也意味着疗效，特别是副作用的不同。&lt;/p&gt;
&lt;p&gt;如果您在路上堵车，找不到停车位，在挂号室门前受冻，坐在门诊等候一上午无所事事，请尽量不要将怨气宣泄在那个为您看病的医生身上，他在上班路上一样堵车，一样找不到停车位，您在挂号室门前受冻的时候，他在病房检查住院的病人，您在门诊等候的时候，他在诊室里奋力看病。&lt;/p&gt;
&lt;p&gt;很多时候医生的态度是由科室决定的，越是紧急和危急生命的科室，医生的态度越冷漠甚至恶劣，在急诊室不可能有医生和颜悦色地跟家属说话，有且只有厉声命令家属去做什么。医生不会也不应该把病人当作自己的亲人来对待，事实上很多医生不敢给自己的亲人做手术，因为感情因素可能会影响判断。&lt;/p&gt;
&lt;p&gt;希望您能明白，医生的态度与医学水平没有直接的关系。&lt;/p&gt;
&lt;h3&gt;期望&lt;/h3&gt;
&lt;p&gt;相当多的疾病是不能够消除病因的，比如常见的高血压、糖尿病、青光眼、类风湿……现在的医学也无法解决这些问题，医生能够提供的是尽可能控制疾病进展的方法，使疾病无害化，血压降低到正常值，意味着您几十年以后死于脑出血的可能性要减小；眼压降低到目标眼压，意味着您丢失视野的速度能够减慢，甚至停止。您能够在医生这里找到的不一定是战胜疾病的方法，而往往是学会如何与疾病共存，共同生活。&lt;/p&gt;
&lt;p&gt;新闻或者报纸上出现的某个疾病的治疗“希望”，并不等于真正在医院就可以给您用上。医学是非常保守的学科，一种治疗方法要经过几年、十几年甚至几十年的研究才能确定下来，一种新药上市至少要经过十年的实验和审批才能够进入医院的药房。&lt;/p&gt;
&lt;p&gt;即使是经过那么多年的研究确定下来的治疗方案，仍然不可能100%的保证治好您的疾病，绝对不可能。治病和修车不一样，不是您交了钱，就一定可以拿到一辆修好的车。&lt;/p&gt;
&lt;p&gt;请您一定记住：花了钱，绝对不可能得到保证治愈，绝对不可能保证没有风险。
万一你得到了医生这样的保证，说明：
a)医生在安慰你；
b)跟你说话的压根就不是个医生。&lt;/p&gt;
&lt;h3&gt;知情同意&lt;/h3&gt;
&lt;p&gt;如前所述，您绝对不可能得到保证治愈，绝对不可能保证没有风险。在侵入性的操作治疗或者手术之前，医生会给您看一个知情同意书。这个知情同意书就像是您在购买股票、基金时听到的“入市有风险，投资需谨慎”一样，是要告诉您可能发生的危险的。
1. 知情同意书上写的每一种风险，都是真实发生过的，至少有一个真实的病人，真真切切地经受过这样的痛苦。
2. 知情同意书上写的出现的风险，一旦发生，医生也会继续全力地帮助您。&lt;/p&gt;
&lt;h3&gt;不证自明的公理&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;人都是要生病的。&lt;/li&gt;
&lt;li&gt;人都是要病死的。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;也许从某种程度上来说，正常人和病人，甚至癌症病人之间的区别，只是5年生存率有所不同而已，而且都小于100%。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;2017年补充&lt;/p&gt;
&lt;h2&gt;如何看病.番外篇.面对恶性疾病&lt;/h2&gt;
&lt;p&gt;疾病都不是什么好事，有些疾病更加不好，比如严重的外伤、癌症之类。危及一个器官的功能，甚至可能危及生命。&lt;/p&gt;
&lt;p&gt;不久前我一个好友就得了这样的疾病。两家是世交，她与我年龄相仿。她家也是在医院工作，所以治疗上的事情，不用我给太多建议。&lt;/p&gt;
&lt;p&gt;前去探望病人前，我当时给了亲友们三个建议：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;得病不问原因&lt;/li&gt;
&lt;li&gt;得病不必担心未来&lt;/li&gt;
&lt;li&gt;治病只关心当下最佳&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;得病不问原因&lt;/h3&gt;
&lt;p&gt;病因的探究更多的是由医生对着大批量的病人做出的统计学分析。种种不良的生活习惯，心理状态都可能对健康造成不利的影响。比如医生认为吸烟是肺癌的危险因素，每日吸烟量*吸烟年&amp;gt;=400，医生在问诊和检查时就要谨慎了。但统计学的分析到每个个体身上却不一定应验。正如网上流传的各种段子所言：不抽烟不喝酒，63岁，林彪同志；只喝酒不抽烟，73岁，恩来同志；只抽烟不喝酒，83岁，主席同志；既抽烟又喝酒，93岁，小平同志；&lt;/p&gt;
&lt;p&gt;对于个人而言，疾病的原因可能无法确切的知道，而且对于恶性疾病，病因也不一定需要知道。&lt;/p&gt;
&lt;p&gt;人们在讨论个人疾病的病因时，更多的是作为茶余饭后的谈资。某年某月装修啦，当时家具的气味很大啦；某年某月某日着凉啦；某年某月没有遵守古训啦；某年某月拍过X光片啦；某年某月遇到一位算命先生啦⋯⋯这些是常见的大众对于病因的探讨。这种探究是没有意义的，既无助于治疗，又无助于未来的预防。只是大家谈论的一个话题而已。而且这样的话题在探望恶性疾病的患者时，是很容易被提起的。&lt;/p&gt;
&lt;p&gt;探究病因对于病人和家属不但没有意义，还可能有害。一个人得病以后，特别患上恶性疾病以后，患者和家人第一个心理状态就是“否认”，表现为“这不可能”‘，“这一定是搞错了”。否认的第二个阶段就是“这不是我的错”，“这是由于他人的原因造成的”。探究病因的最终结果常常是得出“这是由于他人的原因所造成”这样的结论。于是这样的结论就会导出下一个结果：疾病既然是他人的原因造成的，就必须由“他人”来负责。这是一个“解铃还需系铃人”的朴素推理过程。不过真正的疾病，并不像武侠小说里那么简单，下毒的人必定掌握解药。真正的疾病可能即使诱发的原因知道了，治疗仍然是需要由专业的医生施行。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;得病并不是一种错误或者惩罚。病了就是病了。一个好人并不会由于得病而降低他的德行，一个坏人也并不会因为得病而受到宽恕。&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;得病不必担心未来&lt;/h3&gt;
&lt;p&gt;医生是很关注病人的“预后”的。所谓预后，就是医生对治疗后未来结果的估计。&lt;/p&gt;
&lt;p&gt;但我认为，病人、家属和去探望病人的亲友，不要太多讨论得病以后的未来。这个提法有些古怪。我所在的眼科，恶性肿瘤的疾病比较少，但眼外伤却能够遇见很多。眼球的破裂伤可能破镜难圆，造成患者视力永久的损失。有些病人在眼球受伤以后会非常的紧张，为自己的未来无比的担忧，给自己非常大的心理压力。这种心理压力虽然不见得对治疗有什么太大的阻碍作用，但也没什么帮助。&lt;/p&gt;
&lt;p&gt;对未来的担忧，会像传染病一样，从一个家属或者一个探望病人的亲友之中播散开来，传播给病人，也传播给病人周围的人。&lt;/p&gt;
&lt;p&gt;普通人不是医生，见过的疾病很少，见过的病人也很少，并没有有足够的经验来判断自己的未来状态，容易错误的估计。悲观绝望之下，做出的选择并不见得正确。&lt;/p&gt;
&lt;p&gt;治病都会花费不菲，过多的担忧未来，也可能反而延误现在的治疗时机。&lt;/p&gt;
&lt;p&gt;对于恶性疾病，常见的评估预后的参数是“五年生存率”，也就是五年以后这个病人仍然生存的概率。在病人面前讨论这个问题，相当于不断在提示死亡。并非所有人都能够清晰的意识到死亡是存在的。对于每个健康的人来说，每时每刻也面临着种种生存威胁的可能性。可以说，健康人也有“五年生存率”。而且显而易见的是，健康人的五年生存率也不是100%的。越早意识到这一点，越早明白许多道理。&lt;/p&gt;
&lt;h3&gt;治病只关心当下最佳&lt;/h3&gt;
&lt;p&gt;过去通过现在作用于未来。当下才是最为重要的。治病的时候，需要冷静的分析，与医生合作、探讨，寻求最好的治疗方法。对于恶性疾病，通常治疗会比较复杂。每个医院每个科室会因为人力资源和物力资源的不同，而各有侧重。医生之间、科室之间、乃至医院之间是有转诊制度的。当某个病人的病情已经超出了这个医生、科室甚至医院的处理能力，一个好医生会指点病人去寻求更好的治疗。&lt;/p&gt;
&lt;p&gt;果壳本来要出一本关于《如何看病》的书／漫画书(?)，本篇是其中的一小部分，但好像后来没了下文。今天看到推友提到家人做检查发现一些异常的征象，于是我擅自贴出这个番外篇。&lt;/p&gt;&lt;/div&gt;</description><guid>https://goldengrape.github.io/posts/ophthalmology/How-to-see-a-doctor/</guid><pubDate>Thu, 11 Jan 2018 07:30:24 GMT</pubDate></item><item><title>如何拒绝进入美丽新世界</title><link>https://goldengrape.github.io/posts/bulabula/how-to-refuse-brave-new-world/</link><dc:creator>Golden Grape</dc:creator><description>&lt;div&gt;&lt;p&gt;以前写的文章还是应该搬运到这个blog. 这篇是2012年写的.&lt;/p&gt;
&lt;p&gt;读完了&lt;a href="http://book.douban.com/subject/1321789/"&gt;《美丽新世界》&lt;/a&gt;
很高兴，貌似我有天然的免疫力。如果你已经读完了《美丽新世界》，以下教程能帮助你拒绝美丽新世界，当且仅当你愿意的话。如果你没读过，请关闭此页，下面的文字对你有害，真的。&lt;/p&gt;
&lt;!-- TEASER_END --&gt;

&lt;h2&gt;了解现状&lt;/h2&gt;
&lt;h3&gt;认识媒体：&lt;/h3&gt;
&lt;p&gt;媒体是尖叫。&lt;/p&gt;
&lt;p&gt;在自由竞争的前提下，媒体是在争夺人们的注意力。如何去争夺？靠低声细语么？不可能，只能是尖叫。随便打开一个中文门户网站，看标题你就知道“尖叫”的含义了。在大声尖叫的时候，很大可能会无意将事实扭曲，或者为了争夺眼球，就干脆主动去把事实扭曲。&lt;/p&gt;
&lt;p&gt;我理解的媒体，是对信息进行调制和放大，与受众进行正反馈循环。简言之: 媒体就是起哄架秧子的。&lt;/p&gt;
&lt;p&gt;媒体包括但不限于：电视、广播、网站、微博、特别是其中的营销账号。兼听则明？你试试从一组哈哈镜中还原一个图像先。这种技术是有的，叫做自适应光学（Adaptive Optics），是很高端的技术哦。&lt;/p&gt;
&lt;h3&gt;媒体报道的内容：&lt;/h3&gt;
&lt;p&gt;新闻。&lt;/p&gt;
&lt;p&gt;“狗咬人不是新闻，人咬狗才是新闻”，由此可见，新闻所报道的事件只是小概率事件。甚至大部分新闻我们有足够的把握说，它在相当长的时间内不会发生第二次。目前看只有科技新闻除外，科技新闻报道的事件往往只是一个开始，它之所以小概率是因为以前没有发生过。哦，对了，还有天气预报。&lt;/p&gt;
&lt;h3&gt;新闻的意义：&lt;/h3&gt;
&lt;p&gt;考虑到新闻所报道的事件只是小概率事件，而且它已经发生过了，估计它在相当长的时间内不会发生第二次。那么从新闻中获得的信息不会再次被利用。如何处理狗咬人的信息是有意义的，而如何处理人咬狗的信息是无意义的。因此，新闻的意义是——没有意义。&lt;/p&gt;
&lt;h3&gt;升级：&lt;/h3&gt;
&lt;p&gt;人类绝大多数科技是面向——A4纸的。比如PDF，你无论在哪种电脑显示器上看，它都是别扭的；比如word，在说过一大堆脏话之后，你会同意我的意见；PPT是人类重要的进步之一，因为它是面向——投影仪的。&lt;/p&gt;
&lt;p&gt;如果你像我一样老，又像我一样年轻。你会知道绝大多数人的工作——编辑word、PPT、excel和玩连连看，用主频60MHz的386和xGHz的超级本是几乎一样的。甚至，早期的WPS使用了在现在也看起来非常先进的概念——将撰写与排版分开，以符号来标记排版规则，FxxK所见即所得。我知道你的xGHz的超级本跑Solidworks 2012还是觉得比较卡，不过从统计学上来说，已经是3个sigma之外了是不是？&lt;/p&gt;
&lt;p&gt;如果你像我一样老，又像我一样年轻。你会知道绝大多数人的手机，不论上面跑的是iOS 6、Android JB甚至WebOS，只是用来打电话和发短信，其实还是8250最好用。&lt;/p&gt;
&lt;p&gt;(2018年发现, 现在手机已经很少用来打电话, 除了收验证码也用不着短信了, 手机目前最重要的功能是微信, 移动支付, 叫车. 还真是改变了不少)&lt;/p&gt;
&lt;h3&gt;电视&lt;/h3&gt;
&lt;p&gt;Mitch Altman说大多数人：8小时做自己不喜欢的工作，8小时看电视（在帝都还要算上通勤），8小时睡觉。&lt;/p&gt;
&lt;h3&gt;广告&lt;/h3&gt;
&lt;p&gt;除了在课堂上昏昏欲睡时老师讲给你的知识，通常你听到的、看到的甚至闻到的事物，只有一个目的，就是让你花钱买点什么，或者让你不拿钱做点什么，也就是广告。&lt;/p&gt;
&lt;p&gt;比如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;显而易见的，星座、血型、励志是广告；&lt;/li&gt;
&lt;li&gt;显而易见的，奥运会是广告；&lt;/li&gt;
&lt;li&gt;显而易见的，圣诞节、父亲节、母亲节甚至春节是广告；&lt;/li&gt;
&lt;li&gt;显而易见的，反转基因-转基因、绿色食品、有机食品、中医-西医、宗教信仰是广告；&lt;/li&gt;
&lt;li&gt;非常多的，你听到的，见到的，你感觉自己想到的观点，是各公司市场部帮你想的——广告。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;悄悄的改变现状&lt;/h2&gt;
&lt;p&gt;嘘，改变现状，意味着你开始远离『正常』的人类社会。所以，不要声张，悄悄开始就好了。&lt;/p&gt;
&lt;h3&gt;从控制电视开始&lt;/h3&gt;
&lt;p&gt;遥控器不是控制，因为你并不能躲开新闻联播。
遥控器+机顶盒+视频点播或者回放是控制，因为你可以选择快进、后退、暂停，也可以选择看这个节目或者那个节目。
但是，你必须放弃点什么作为交换，那就是不能及时收看当天的节目。不过及时收看当天的节目中要么？真的重要么？你那么想看今天的广告么？&lt;/p&gt;
&lt;p&gt;微博/twitter并不是可以控制的媒体，你可以选择关注/follow特定的人，就好像用遥控器换台，但你无法控制进入眼帘的话题。好在有各种技术手段，在微博上有&lt;a href="https://userscripts.org/scripts/show/114087"&gt;“眼不见心不烦”插件&lt;/a&gt;.  在twitter上有hotot&lt;/p&gt;
&lt;p&gt;从视频点播和回放控制，可以学到&lt;/p&gt;
&lt;p&gt;Lesson 1，慢一点，才省时间。&lt;/p&gt;
&lt;h3&gt;不要形容自己&lt;/h3&gt;
&lt;p&gt;你可以说自己出生于2012年8月13日，但是不要说自己是属龙的狮子座；不要记得自己的血型，就算是抢救医生也会给你开验血化验单的；不要知道自己是内向/外向，多血质/ 粘液质/ 胆汁质/ 抑郁质；&lt;/p&gt;
&lt;p&gt;自我是复杂的，不要试图用简单的词汇来形容自己。一旦形容了，你就被词汇所限定住了，慢慢真正变成了一个属龙的人，一个狮子座的人，一个O型血的人……你会跟命理书、星座书、血型书上所描写的那类人越来越接近。随后你的人生就写在那些廉价书的规定里面了。于是你就变成了一个可以用简单的词汇来限定的人。&lt;/p&gt;
&lt;p&gt;Lesson 2，语言是有魔力的，它将描述的事物离散化，使其中连续的部分不可认知，接触语言时要小心谨慎。&lt;/p&gt;
&lt;h3&gt;敢拒绝&lt;/h3&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;我TMD不喝酒。
我TMD就不喝酒。
我TMD就滴酒不沾。
去TMD社会习俗。
去TMD社交礼仪。
法律不禁止的事情我想干嘛干嘛。
&lt;/pre&gt;


&lt;p&gt;Lesson 3，脏话给人以力量，给人以力量的东西使人低估风险。&lt;/p&gt;
&lt;h3&gt;提防嗜好&lt;/h3&gt;
&lt;p&gt;不能用来赚钱的嗜好都是不良嗜好。
你的嗜好非常有可能是被广告商植入的。
一切可能上瘾的事情我都本能的躲开。
我不吸烟不喝酒不喝咖啡不喝茶不玩网游不看电视不听发烧音响不玩单反&lt;/p&gt;
&lt;p&gt;Lesson 4，不以物喜。&lt;/p&gt;
&lt;h3&gt;赞成/ 反对/ 我不关心&lt;/h3&gt;
&lt;p&gt;除了赞成和反对以外，还有一种重要的表态，是“我不关心”。某位先贤说过，世上的事情基本两大类，关我屁事和关你屁事。因此“我不关心”，好像应该是默认的表态方式。当看到“不转不是中国人”时，为了健康起见，还是在椅子上转一圈比较好。&lt;/p&gt;
&lt;p&gt;Lesson 5，空集是任何集合的子集，别忘了，不然考试容易被扣分。&lt;/p&gt;
&lt;h3&gt;Think different&lt;/h3&gt;
&lt;p&gt;Youtube视频&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.youtube.com/watch?v=cFEarBzelBs"&gt;https://www.youtube.com/watch?v=cFEarBzelBs&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;=====2016年补充＝＝＝＝&lt;/p&gt;
&lt;p&gt;&lt;a href="https://twitter.com/hanxiaoyu/status/735309330443034624"&gt;寒雨★Lee&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;再有14天就要高考了，提前祝高考的考生们考试顺利。 四年后你们会明白，你们今天的所有的努力，并没有什么卵用。改变你们命运的不是知识文化，主要是酒量，关系，胆量，爹妈、长相 ，还有你们村是不是要拆。&lt;/p&gt;
&lt;p&gt;&lt;a href="https://twitter.com/goldengrape/status/735335538006327296"&gt;goldengrape‏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;十年以后你们会明白， 想摆脱“酒量，关系，胆量，爹妈、长相 ，还有你们村是不是要拆。”的影响 高考才是第一步。 等你在某一个领域超过95%以上的人群，就可以理直气壮的说“我不喝酒，就TMD不喝”&lt;/p&gt;&lt;/div&gt;</description><guid>https://goldengrape.github.io/posts/bulabula/how-to-refuse-brave-new-world/</guid><pubDate>Thu, 11 Jan 2018 07:13:24 GMT</pubDate></item><item><title>Pandas中集合的运算</title><link>https://goldengrape.github.io/posts/python/pandaszhong-ji-he-de-yun-suan/</link><dc:creator>Golden Grape</dc:creator><description>&lt;div tabindex="-1" id="notebook" class="border-box-sizing"&gt;
    &lt;div class="container" id="notebook-container"&gt;

&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;快要被Pandas搞疯了. 各种奇技淫巧太多,&lt;/p&gt;
&lt;p&gt;我觉得pandas, 或者说python的”大数据"处理技巧两种:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;a0. 确定你需要的数据文件是什么名字
a1. 去stackoverflow搜数据文件名字看看教程. 
a2. 如果不能满足自己的要求, 提个问题, 然后等一周. 

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;或者:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;b0. 自己查文档埋头苦干一周

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;通常前者的解决方案效果优于后者, 而且代码更为优雅易读.&lt;/p&gt;
&lt;p&gt;例如:&lt;/p&gt;
&lt;p&gt;你发现自己研究的数据来自 City_Zhvi_AllHomes.csv (From the &lt;a href="http://www.zillow.com/research/data/"&gt;Zillow research data site&lt;/a&gt; there is housing data for the United States. In particular the datafile for &lt;a href="http://files.zillowstatic.com/research/public/City/City_Zhvi_AllHomes.csv"&gt;all homes at a city level&lt;/a&gt;, &lt;code&gt;City_Zhvi_AllHomes.csv&lt;/code&gt;, has median home sale prices at a fine grained level.)&lt;/p&gt;
&lt;p&gt;那么, 只需要在StackOverFlow上&lt;a href="https://stackoverflow.com/search?q=City_Zhvi_AllHomes.csv"&gt;搜索City_Zhvi_AllHomes.csv&lt;/a&gt; 即可.&lt;/p&gt;
&lt;!-- TEASER_END --&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="但我还是喜欢有理有据的解决"&gt;但我还是喜欢有理有据的解决&lt;a class="anchor-link" href="https://goldengrape.github.io/posts/python/pandaszhong-ji-he-de-yun-suan/#%E4%BD%86%E6%88%91%E8%BF%98%E6%98%AF%E5%96%9C%E6%AC%A2%E6%9C%89%E7%90%86%E6%9C%89%E6%8D%AE%E7%9A%84%E8%A7%A3%E5%86%B3"&gt;¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;作业题中是美国各个城市的房价, 城市分两类, 一类是有大学的, 一类是没大学的, 那么看看这两类城市房价的区别,&lt;/p&gt;
&lt;p&gt;可以取得的数据集是各个城市的房价, 是一个DataFrame, 还有一个是大学城名称的DataFrame. 但这两个DataFrame都是MultiIndex的, index中包含州的名字和城市的名字.&lt;/p&gt;
&lt;p&gt;所以问题就是对于MultiIndex的两个DataFrame, 如何取得交集和补集. 注意数据的Index有关系, 但数据内容可不一定有关系. coursera上讨论区中&lt;a href="https://www.coursera.org/learn/python-data-analysis/discussions/weeks/4/threads/n6epwLCKEeewNAofllqCYg"&gt;高票支持的回答&lt;/a&gt;里各种奇技淫巧, 各种奇技淫巧. 而且你如果用他的方法, 在不同的python/pandas版本貌似出来的结果是不同的.&lt;/p&gt;
&lt;p&gt;不调用原始题目了, 用一个简化模型来说明.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="建立两个MultiIndex的DataFrame"&gt;建立两个MultiIndex的DataFrame&lt;a class="anchor-link" href="https://goldengrape.github.io/posts/python/pandaszhong-ji-he-de-yun-suan/#%E5%BB%BA%E7%AB%8B%E4%B8%A4%E4%B8%AAMultiIndex%E7%9A%84DataFrame"&gt;¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;分别是s1和s2, 一会儿求他们的交集和差集.&lt;/p&gt;
&lt;p&gt;S1:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th&gt;first&lt;/th&gt;
&lt;th&gt;second&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;bar&lt;/td&gt;
&lt;td&gt;one&lt;/td&gt;
&lt;td&gt;0.502489&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;two&lt;/td&gt;
&lt;td&gt;1.061737&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;baz&lt;/td&gt;
&lt;td&gt;one&lt;/td&gt;
&lt;td&gt;-0.207277&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;two&lt;/td&gt;
&lt;td&gt;2.042837&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;foo&lt;/td&gt;
&lt;td&gt;one&lt;/td&gt;
&lt;td&gt;-0.792736&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;two&lt;/td&gt;
&lt;td&gt;-0.204785&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;qux&lt;/td&gt;
&lt;td&gt;one&lt;/td&gt;
&lt;td&gt;1.596757&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;two&lt;/td&gt;
&lt;td&gt;-0.585016&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;S2:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th&gt;first&lt;/th&gt;
&lt;th&gt;second&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;bar&lt;/td&gt;
&lt;td&gt;one&lt;/td&gt;
&lt;td&gt;0.553635&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;foo&lt;/td&gt;
&lt;td&gt;two&lt;/td&gt;
&lt;td&gt;1.049258&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;cool&lt;/td&gt;
&lt;td&gt;three&lt;/td&gt;
&lt;td&gt;-1.059016&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [3]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pandas&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pd&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="n"&gt;arrays1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="s1"&gt;'bar'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'bar'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'baz'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'baz'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'foo'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'foo'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'qux'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'qux'&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
          &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'one'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'two'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'one'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'two'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'one'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'two'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'one'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'two'&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;
&lt;span class="n"&gt;tuples1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;zip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;arrays1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;index1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MultiIndex&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;from_tuples&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tuples1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;names&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'first'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'second'&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="n"&gt;s1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Series&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;randn&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tuples1&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;index1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;s1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;
&lt;div class="prompt output_prompt"&gt;Out[3]:&lt;/div&gt;



&lt;div class="output_text output_subarea output_execute_result"&gt;
&lt;pre&gt;first  second
bar    one       0.502489
       two       1.061737
baz    one      -0.207277
       two       2.042837
foo    one      -0.792736
       two      -0.204785
qux    one       1.596757
       two      -0.585016
dtype: float64&lt;/pre&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [5]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;arrays2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="s1"&gt;'bar'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'foo'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"cool"&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
          &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'one'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'two'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"three"&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;
&lt;span class="n"&gt;tuples2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;zip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;arrays2&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;index1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MultiIndex&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;from_tuples&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tuples2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;names&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'first'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'second'&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="n"&gt;s2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Series&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;randn&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tuples2&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;index1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;s2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;
&lt;div class="prompt output_prompt"&gt;Out[5]:&lt;/div&gt;



&lt;div class="output_text output_subarea output_execute_result"&gt;
&lt;pre&gt;first  second
bar    one       0.553635
foo    two       1.049258
cool   three    -1.059016
dtype: float64&lt;/pre&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;现在要求解:
s1, s2中index的交集, 差集.&lt;/p&gt;
&lt;p&gt;可以参考&lt;a href="https://pda.readthedocs.io/en/latest/chp5.html"&gt;Python For Data Analysis &lt;/a&gt;
&lt;img src="https://pda.readthedocs.io/en/latest/_static/cover.jpg" alt=""&gt;&lt;/p&gt;
&lt;p&gt;索引方法和属性&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;append    链接额外的索引对象，产生一个新的索引&lt;/li&gt;
&lt;li&gt;diff  计算索引的差集&lt;/li&gt;
&lt;li&gt;intersection  计算交集&lt;/li&gt;
&lt;li&gt;union 计算并集&lt;/li&gt;
&lt;li&gt;isin  计算出一个布尔数组表示每一个值是否包含在所传递的集合里&lt;/li&gt;
&lt;li&gt;delete    计算删除位置i的元素的索引&lt;/li&gt;
&lt;li&gt;drop  计算删除所传递的值后的索引&lt;/li&gt;
&lt;li&gt;insert    计算在位置i插入元素后的索引&lt;/li&gt;
&lt;li&gt;is_monotonic  返回True，如果每一个元素都比它前面的元素大或相等&lt;/li&gt;
&lt;li&gt;is_unique 返回True，如果索引没有重复的值&lt;/li&gt;
&lt;li&gt;unique    计算索引的唯一值数组&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;当然, 如果你完全相信他, 那就上当了. 我反复说过, 开源社区有一定的&lt;strong&gt;反社会倾向&lt;/strong&gt;, 不能不信, 也不能全信. 比如我想用的最重要的这个差集的计算方法, 如果用diff就报错了. 要用difference.&lt;/p&gt;
&lt;p&gt;要回到pandas的文档中找证据: &lt;a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Index.difference.html"&gt;pandas.Index.difference&lt;/a&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [7]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;idx1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Index&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="n"&gt;idx2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Index&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="n"&gt;idx1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;difference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;idx2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;
&lt;div class="prompt output_prompt"&gt;Out[7]:&lt;/div&gt;



&lt;div class="output_text output_subarea output_execute_result"&gt;
&lt;pre&gt;Int64Index([1, 2], dtype='int64')&lt;/pre&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;如果你想把MultiIndex的例子简单代入&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;s1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;difference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;那么又错了. 反社会倾向, 注意.&lt;/p&gt;
&lt;p&gt;Pandas文档中的例子里idx1和idx不是DataFrame, 而是index. 被反社会以后, 我还得承认是自己看错了.&lt;/p&gt;
&lt;p&gt;所以:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [16]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;s1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;difference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;
&lt;div class="prompt output_prompt"&gt;Out[16]:&lt;/div&gt;



&lt;div class="output_text output_subarea output_execute_result"&gt;
&lt;pre&gt;MultiIndex(levels=[['bar', 'baz', 'foo', 'qux'], ['one', 'two']],
           labels=[[0, 1, 1, 2, 3, 3], [1, 0, 1, 0, 0, 1]],
           names=['first', 'second'],
           sortorder=0)&lt;/pre&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;求解两个集合的交集:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [17]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;s1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;s1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;intersection&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;
&lt;div class="prompt output_prompt"&gt;Out[17]:&lt;/div&gt;



&lt;div class="output_text output_subarea output_execute_result"&gt;
&lt;pre&gt;first  second
bar    one       0.502489
foo    two      -0.204785
dtype: float64&lt;/pre&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;从集合s1中扣除s2, 剩下的差集&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [18]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;s1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;s1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;difference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;
&lt;div class="prompt output_prompt"&gt;Out[18]:&lt;/div&gt;



&lt;div class="output_text output_subarea output_execute_result"&gt;
&lt;pre&gt;first  second
bar    two       1.061737
baz    one      -0.207277
       two       2.042837
foo    one      -0.792736
qux    one       1.596757
       two      -0.585016
dtype: float64&lt;/pre&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [ ]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt; 
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
</description><guid>https://goldengrape.github.io/posts/python/pandaszhong-ji-he-de-yun-suan/</guid><pubDate>Tue, 09 Jan 2018 08:02:34 GMT</pubDate></item><item><title>人工晶状体调节力的难题</title><link>https://goldengrape.github.io/posts/bulabula/IOL-problem/</link><dc:creator>Golden Grape</dc:creator><description>&lt;div&gt;&lt;p&gt;终于过完2017到2018年了, 这篇写于2015-08-20的文章, 又可以理直气壮地重新贴一遍. 哇哈哈哈!
&lt;img alt="" src="https://goldengrape.github.io/images/face.jpg"&gt;&lt;/p&gt;
&lt;h2&gt;2017年，世界上还有很多很多很多很多近视眼&lt;/h2&gt;
&lt;p&gt;2015-08-20&lt;/p&gt;
&lt;p&gt;昨天(2015年8月19日)又看到所谓《2017年，世界上将不存在近视眼》的文章，类似的有《10秒钟让你恢复视力》&lt;a href="http://fashion.sohu.com/20150529/n414051503.shtml"&gt;http://fashion.sohu.com/20150529/n414051503.shtml&lt;/a&gt; 讲的是ocumetics (ocumetics.com)出的一种bionic lens能够将视力提高到3.0，这是误导，听我道来&lt;/p&gt;
&lt;p&gt;这个基本上是一个这样的故事：理科生说给我一个支点我可以撬动地球，商科生激动地在写行星工程开发计划书，新闻系的同学拿着喇叭到处喊火星移民马上实现。现在由医科生讲讲为什么大家该吃药了。
&lt;!-- TEASER_END --&gt;&lt;/p&gt;
&lt;p&gt;youtube上有一段采访视频&lt;a href="https://www.youtube.com/watch?v=Lqj7Mguu-Ps"&gt;https://www.youtube.com/watch?v=Lqj7Mguu-Ps&lt;/a&gt; 以及在他们公司的网页上讲到这是一个intraocular lens，大陆叫做人工晶体或者人工晶状体，港台成为人工水晶体，极其不专业的专利会翻译成眼内透镜，缩写是IOL&lt;/p&gt;
&lt;p&gt;IOL是一片高分子材料的透镜，放置在眼睛里面，最早是1949年由Sir.Ridely发明的。他当时发现皇家空军飞行员受伤后眼睛里残留着有机玻璃弹片，弹片在眼睛里居然没有发炎也没有引起排异反应。于是受此启发做了最早的IOL &lt;a href="http://www.ridleyeyefoundation.org/history/sir-harold/"&gt;http://www.ridleyeyefoundation.org/history/sir-harold/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;IOL放在眼睛里有几个可能的位置：角膜和虹膜之间（前房型），虹膜表面（虹膜固定），{虹膜和天然晶状体之间（睫状沟固定），去掉天然晶状体后存留的晶状体囊袋之内（囊袋内）}.（后房型）&lt;/p&gt;
&lt;p&gt;IOL大多数应用是来治疗白内障的，也就是天然的晶状体混浊以后，医生通过手术把天然晶状体摘掉，再换上IOL。也有专门用来治疗近视的，目前有&lt;a href="http://www.ophtec.com/professional/en/cataract-surgery/intra-ocular-lenses/artisan-aphakia/artisan-aphakia-ref-205"&gt;虹膜加持的Artisan&lt;/a&gt; 和&lt;a href="http://visianinfo.com"&gt;睫状沟固定的 ICL&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;对于治疗近视的IOL植入，医生是要保留天然晶状体的，是有晶体眼的人工晶体植入。这是因为天然晶体具有调节能力，目前IOL还很难完美恢复这个能力。调节，就是人眼能够自动调整焦距，能够根据看远还是看近的需要调整天然晶状体的形态，改变焦距。&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.youtube.com/watch?v=Lqj7Mguu-Ps"&gt;采访视频中&lt;/a&gt; 该公司叙述的这个bionic lens是植入到囊袋内的IOL。所以，这个IOL植入手术是建立在将天然晶体摘除以后的基础之上的。该公司寄希望于利用人工晶体产生足够的调节力，完全替换掉天然晶状体&lt;/p&gt;
&lt;p&gt;要改变一个透镜的焦距，有几种办法：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;换一片透镜&lt;/li&gt;
&lt;li&gt;在同一片透镜上做出好几个焦距，根据需要遮挡掉不需要的。&lt;/li&gt;
&lt;li&gt;移动透镜。&lt;/li&gt;
&lt;li&gt;改变透镜形态。&lt;/li&gt;
&lt;li&gt;改变透镜内折射率的分布。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;0.换透镜就不说了，摘戴老花镜就是。&lt;/p&gt;
&lt;p&gt;1.同一片透镜上做几个焦距，在眼镜上也有，比如双光的老花镜上半部分看远，下半部分看近。光学好的同学还应该知道菲涅耳波带片，靠衍射可以产生多个焦点。这也是现在IOL市场主流的解决方式。用折射多焦或者衍射多焦做出多个焦点，利用人眼在看近时瞳孔的变化，改变视远视近光强的能量分配。这种方案其实总还是有错误焦点的干扰，看远看近都有些虚。有些病人觉得很难受，有些病人能接受。&lt;/p&gt;
&lt;p&gt;3.改变透镜形态。和 4.改变透镜内折射率的分布。这是人眼调节的方法，目前人工产品还很难学会。还有方案2.移动透镜。&lt;/p&gt;
&lt;p&gt;从视频的讲解来看，ocumetics的方案就是移动透镜，这也是之前有IOL厂商用过的原理，比如1CU, &lt;a href="http://www.lenstec.com/tetraflex-hd.html"&gt;tetraflex&lt;/a&gt; 还有用两片镜片配合在一起移动的。&lt;/p&gt;
&lt;p&gt;如果没有外部供能，移动镜片有一个必要的前提假设——晶状体囊袋是有弹性的。天然晶状体长在囊袋里，囊袋四周有一圈悬韧带，悬韧带再挂到睫状体上，是一个悬挂式的结构。主流理论认为，人眼调节的时候，睫状肌会运动，晶状体本身的弹性使得晶状体形态和折射率分布发生改变。想象一个气球周边挂了一圈绳子，绑在一个呼啦圈上，改变呼啦圈直径，气球形态变化&lt;/p&gt;
&lt;p&gt;如果囊袋变硬了，那么即使睫状肌能够运动，也只是通过悬韧带拉一个硬邦邦的盒子，盒子内部的结构是没有办法移动的。&lt;/p&gt;
&lt;p&gt;这就是所有的利用人体自身力量进行调节的IOL的问题——囊袋会变硬。摘除天然晶状体的手术，是在囊袋上撕个圆孔，把晶状体的皮质、核从里面掏出来，保留表面的囊，再把IOL塞进去。这个手术是一个破坏性的手术。有破坏，身体就一定会启动修复过程。&lt;/p&gt;
&lt;p&gt;手术中会尽量清除晶状体囊袋内的东西，包括残余的上皮细胞。但是很难完全清除干净，剩下的上皮细胞会散乱地生长，而且会长成纤维，纤维会交织，变硬。就像身上的皮肤划破了会留下硬质的瘢痕一样。医生们和身体的修复过程做斗争，很少有全胜的。&lt;/p&gt;
&lt;p&gt;而且，还有个矛盾的问题。对于年轻的病人（白内障患者&amp;lt;=60岁我们都觉得很年轻），睫状肌会有很好的力量，但是修复能力强，囊袋纤维化严重；对于高龄的病人，比如80多岁了，他的纤维化倒是好点，但睫状肌已经没什么力量了。这还都是老年人。对于10-40岁的青年病人，囊袋纤维化非常严重，甚至手术之中必须把囊袋的后表面切除掉，免得纤维化阻挡了光线的进入。&lt;/p&gt;
&lt;p&gt;所以即使有一个尚且可以使用的调节型IOL，也是适合于老年人，年轻人指望它来矫正近视，是不可靠的。&lt;/p&gt;
&lt;p&gt;还得再吐槽下，顺着这篇报道&lt;a href="http://www.businessinsider.com/ocumetics-bionic-lens-perfect-vision-at-every-age-2015-5"&gt;http://www.businessinsider.com/ocumetics-bionic-lens-perfect-vision-at-every-age-2015-5&lt;/a&gt; 找过去CEO Dr. garth webb &lt;a href="http://www.completeeyecare.ca/dr-garth-webb/"&gt;http://www.completeeyecare.ca/dr-garth-webb/&lt;/a&gt; 是O.D.，不是M.D.好么。视光学和眼科学是两个学科，就像建筑系和土木工程系是两个系！&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;2016年更新:&lt;/p&gt;
&lt;p&gt;这家公司在2015年炒作之后，又开始在2016年的微信里炒作了《淘汰近视镜，视力比飞行员高三倍，这家公司要逆天》。基本可以猜到是有中国的VC投钱了。&lt;/p&gt;
&lt;p&gt;来，国安的球迷请跟我一起喊：⬛️⬛️！&lt;/p&gt;
&lt;p&gt;除了在公众号上，在网站上可以搜到的文章来源是：&lt;a href="http://mt.sohu.com/20160202/n436646404.shtml"&gt;http://mt.sohu.com/20160202/n436646404.shtml&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;作者是金错刀 &lt;a href="http://mp.i.sohu.com/profile?xpt=MTY0MjQ2NzM0MEBzaW5hLnNvaHUuY29t"&gt;http://mp.i.sohu.com/profile?xpt=MTY0MjQ2NzM0MEBzaW5hLnNvaHUuY29t&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;原来是“发明””“微创新”概念的人，失敬失敬。&lt;/p&gt;
&lt;p&gt;来，国安的球迷请再跟我一起喊：大⬛️⬛️！&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;2018年更新:&lt;/p&gt;
&lt;p&gt;我估计当时是有哪个中国投资人昏了头, 投了ocumetics, 胡乱在中文网站上炒作. 对骗子的宽容是对努力工作研究者的侮辱.&lt;/p&gt;
&lt;p&gt;其实眼科医生们一直没有放弃对人工晶体调节力难题的研究.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;在多焦点人工晶体的改进上. 三焦点的人工晶体, 和区域多焦点的人工晶体, 据说患者的满意度还不错. 虽然没有完全模拟生理的调节, 但如果病人觉得舒服, 能接受, 那也很好.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在克服囊袋纤维化的问题上. 同仁医生居然设计出了能够主动杀死残余晶状体上皮的人工晶体(&lt;a href="https://mp.weixin.qq.com/s/k5VvKW1LTmjMM9EC0y6N1g"&gt;报道&lt;/a&gt;, &lt;a href="http://onlinelibrary.wiley.com/doi/10.1002/adma.201701617/abstract"&gt;文献&lt;/a&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;有钱投给他们呐!&lt;/p&gt;&lt;/div&gt;</description><category>ophthalmology</category><category>科普</category><guid>https://goldengrape.github.io/posts/bulabula/IOL-problem/</guid><pubDate>Fri, 05 Jan 2018 18:44:10 GMT</pubDate></item><item><title>毛笔字粗浅研究(0)</title><link>https://goldengrape.github.io/posts/bulabula/brush-pen-research-0/</link><dc:creator>Golden Grape</dc:creator><description>&lt;div&gt;&lt;p&gt;最近在看&lt;a href="https://www.youtube.com/playlist?list=PL54cajc78e_S8g1Ow2r3epz9GfDLu6iKT"&gt;黄简讲书法课程&lt;/a&gt;, 初级课程已经全部看完了. 这一部分讲的是如何用笔. 说实话黄简老师讲的用笔方法和我小时候学到的完全不同, 比如在转向的时候, 笔尖其实是转了一个小圈再行走.&lt;/p&gt;
&lt;p&gt;因为看这种艺术课程, 讲述的技艺和自己之前没有接触过, 难以理解, 所以必须回到基础的物理学去理解. 这是所谓的”first principle thinking”吧.&lt;/p&gt;
&lt;p&gt;所以首先对毛笔的运行过程进行一下建模.&lt;/p&gt;
&lt;!-- TEASER_END --&gt;

&lt;h2&gt;简化模型&lt;/h2&gt;
&lt;p&gt;毛笔还是很复杂的结构, 笔管是圆柱, 以相对简单的散卓笔为例: 笔毛是两种不同硬度的毛构成的, 中心是硬度大弹性好的笔心, 笔心的毛较少; 周边是更柔软的毛作为包被. 如果是韦诞笔, 则结构还要更加复杂.&lt;/p&gt;
&lt;p&gt;毛笔在运行过程中:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;可能保持弹性形变状态, 笔管压向纸面时毛笔笔锋弹性形变, 压力解除时弹性形变几乎完全恢复.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;也可能进入不可逆的形变, 比如更大的压力压迫到笔腰乃至笔根弯曲, 笔心的笔毛散开, 无法再聚拢.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;或者笔心的毛互相绞在一起, 形成绞锋.比如用笔管不绕自己中轴旋转的前提下, 用毛笔画一个360度的圆周, 一定会发生绞锋.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;所以有字母O的文字一定不会用毛笔的吧.(此处似乎有反例, &lt;a href="https://twitter.com/starknight"&gt;@starknight&lt;/a&gt;说日文中"假名的半浊点, 也就是是pa pi pu pe po, 音节里面要加在字母上的圆圈：ぱぴぷぺぽ")&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;相对简化的模型是现在用海绵头做成的软笔, 这种笔总是可以保持弹性形变.&lt;/p&gt;
&lt;h2&gt;合理假设&lt;/h2&gt;
&lt;p&gt;不考虑笔上墨汁损耗的前提下.&lt;/p&gt;
&lt;p&gt;写一笔完成之后, 应当使毛笔能够恢复到 &lt;strong&gt;"最大表现力的状态"&lt;/strong&gt; , 也就是笔尖尖锐, 笔心聚拢, 笔尖在笔管的中轴线上, 就是所谓的"聚锋"状态. 这是毛笔的初始状态, 也应当是一笔写完后的理想状态.&lt;/p&gt;
&lt;p&gt;如果不能恢复到"聚锋"状态, 那么下一笔能够写出的笔画, 或者能够表现的线条就必然受限. 甚至表现力降低到0, 就需要重新舔笔, 将笔毛捋顺聚拢.&lt;/p&gt;
&lt;p&gt;所以所有的用笔方式都是在控制行笔的过程, 使笔尖一直保持在弹性形变内.&lt;/p&gt;
&lt;h2&gt;直线行笔&lt;/h2&gt;
&lt;p&gt;先不说写"尖锋线", 只讨论"侧锋线". 侧锋是笔管倾斜, 笔尖弯曲, 笔尖指向行进方向的背向.&lt;/p&gt;
&lt;p&gt;纸面是一个平面P_0&lt;/p&gt;
&lt;p&gt;笔管的中心线L_0, 和笔行进的直线L_1, 这两条直线会形成一个平面P_1.&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;要让笔锋走在笔画线条的中央,
笔管的中心线L_0, 和笔行进的直线L_1所构成的P_1平面
应当 **垂直** 于P_0平面(纸面).
&lt;/pre&gt;


&lt;p&gt;这大概是最重要的原理了.
&lt;img alt="侧锋" src="https://goldengrape.github.io/images/%E4%BE%A7%E9%94%8B.png"&gt;&lt;/p&gt;
&lt;p&gt;笔尖走在线条的中央, 线的两侧都是光滑的, 而且笔尖受到的摩擦力是对称的, 不容易把笔尖打散.&lt;/p&gt;
&lt;p&gt;如果笔管与行进直线构成的平面P_1不与纸面P_0垂直, 那么必然会使笔尖偏向线条的一侧, 形成偏锋的行笔, 这种运动笔尖两侧的摩擦力不同, 更可能使笔尖散开. 造成不可逆的形变.
&lt;img alt="偏锋1" src="https://goldengrape.github.io/images/%E5%81%8F%E9%94%8B1.png"&gt;
偏锋侧视图
&lt;img alt="偏锋2" src="https://goldengrape.github.io/images/%E5%81%8F%E9%94%8B2.png"&gt;
偏锋行笔时的受力
&lt;img alt="" src="https://goldengrape.github.io/images/force-of-brush.png"&gt;&lt;/p&gt;
&lt;h2&gt;转向&lt;/h2&gt;
&lt;p&gt;保持线条不断开的前提下:&lt;/p&gt;
&lt;h3&gt;精确解&lt;/h3&gt;
&lt;p&gt;要在转向时仍然保持笔管与行进直线构成的平面P_1&lt;strong&gt;垂直于&lt;/strong&gt;纸面P_0, &lt;strong&gt;精确解只有一个&lt;/strong&gt;. 就是将笔管提高, 只有笔尖一点接触纸面, 将笔管中心线L_0先扶正, 使之垂直于纸面P_0, 然后再转向.
&lt;img alt="正锋" src="https://goldengrape.github.io/images/%E6%AD%A3%E9%94%8B.png"&gt;&lt;/p&gt;
&lt;p&gt;由于L_0垂直于P_0, 而行进直线L_1是在纸面内的, 所以不论L_1转向到哪个方向, L_0与L_1形成的平面总是垂直于纸面的.&lt;/p&gt;
&lt;h3&gt;近似解&lt;/h3&gt;
&lt;p&gt;在小量范围内, 笔尖可以容忍一定的非对称受力而不散开, 相应的, 笔管也可以在一定的倾斜角度和笔管压力范围内变化.&lt;/p&gt;
&lt;p&gt;这就是整个书法初级课程中讲的九用了.&lt;/p&gt;&lt;/div&gt;</description><category>Art</category><guid>https://goldengrape.github.io/posts/bulabula/brush-pen-research-0/</guid><pubDate>Fri, 05 Jan 2018 14:00:06 GMT</pubDate></item><item><title>中国古代数学算法的python实现(jupyter版本)</title><link>https://goldengrape.github.io/posts/python/zhong-guo-gu-dai-shu-xue-suan-fa-jupyter/</link><dc:creator>Golden Grape</dc:creator><description>&lt;div tabindex="-1" id="notebook" class="border-box-sizing"&gt;
    &lt;div class="container" id="notebook-container"&gt;

&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;看了这篇《&lt;a href="https://mp.weixin.qq.com/s?__biz=MzA5NDkzNjIwMg==&amp;amp;mid=2651662431&amp;amp;idx=1&amp;amp;sn=21ae67f8ed94ea960d92734afc384fc1&amp;amp;chksm=8bbe85babcc90cac200fabd65d5494bbbec81792420ba8771ad02bc324257495cffdcd57afcd"&gt;没有定理的中国古代数学，如何站在世界之巅？&lt;/a&gt;》。虽然我觉得题目很标题党，不过里面的内容很有趣啊，讲解了中国古代数学里的几个算法。由于我正在学Python，所以自然就拿来练手了。&lt;/p&gt;
&lt;p&gt;重新用jupyter写一下 更相减损术 和 大衍求一术&lt;/p&gt;
&lt;!-- TEASER_END --&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="更相减损术"&gt;更相减损术&lt;a class="anchor-link" href="https://goldengrape.github.io/posts/python/zhong-guo-gu-dai-shu-xue-suan-fa-jupyter/#%E6%9B%B4%E7%9B%B8%E5%87%8F%E6%8D%9F%E6%9C%AF"&gt;¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;更相减损术是用来求两个数的最大公约数.&lt;/p&gt;
&lt;p&gt;“术曰：以少减多，更相减损，求其等也。”&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;这个很好写啦，读入两个数a和b，求其等也，就是一直要求到两个数相等为止。
所以用条件循环while，当a不等于b时就一直重复算。算什么呢，以少减多，就是判断一下谁大.
如果a&amp;gt;b, 就用a-b替换a，否则就用b-a替换b。
一直到两个数减到相等为止，就可以随便返回其中一个数作为最大公约数了。&lt;/p&gt;
&lt;p&gt;貌似也可以扩展到有理数, 但为了防止死循环, 在循环中加入了下限的设定, 本来想是&amp;gt;0就可以, 但还是需要有一定的大小.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [6]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;更相减损术&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mf"&gt;1e-10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mf"&gt;1e-10&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [14]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="s2"&gt;"__main__"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;更相减损术&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pi&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;更相减损术&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;26&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;39&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
      
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;
&lt;div class="prompt"&gt;&lt;/div&gt;

&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;3.9968028886505635e-11
13
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="大衍求一术"&gt;大衍求一术&lt;a class="anchor-link" href="https://goldengrape.github.io/posts/python/zhong-guo-gu-dai-shu-xue-suan-fa-jupyter/#%E5%A4%A7%E8%A1%8D%E6%B1%82%E4%B8%80%E6%9C%AF"&gt;¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;这个好帅，是求解ax≡1(mod b)。就是说a乘以x除以b所得的余数等于1。详细的解说还是看那篇公众号的文章吧。&lt;/p&gt;
&lt;p&gt;因为打算用矩阵，所以要首先导入Numpy包，python很强大的一点就是有各种包，只要import一下就好像有了超能力。
大衍求一术要求先生成一个2*2的矩阵&lt;/p&gt;
$$
\begin{pmatrix} a &amp;amp; 1 \\ b &amp;amp; 0 \end{pmatrix}
$$&lt;p&gt;这样的，所以先用np.matrix产生一个矩阵m，注意python的序数是从0开始的，所以m[0,0]=a, m[0,1]=1, m[1,0]=b, m[1,1]=0。&lt;/p&gt;
&lt;p&gt;然后跟前面的更相减损术差不多，也是减来减去，区别是以行为单位来减，终点是把a的位置变成1，比大小的时候是用左边那列的元素比大小。&lt;/p&gt;
&lt;p&gt;所以如果m[0,0]&amp;gt;m[1,0]，那就把上一行减去下一行m[0,:]-m[1,:]，再替换掉上面一行m[0,:]=m[0,:]-m[1,:]。反之亦然。一直重复，直到m[0,0] == 1。&lt;/p&gt;
&lt;p&gt;通常是返回m[0,1]的数值就可以了。但有可能a,b互质，所以需要分情况讨论一下。&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [23]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;大衍求一术&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="sd"&gt;'''&lt;/span&gt;
&lt;span class="sd"&gt;    Solve a*x mod b ==1 with 大衍求一术&lt;/span&gt;
&lt;span class="sd"&gt;    置诸元数，两两连环求等，约奇弗约偶，遍约毕，乃变元数，皆曰定母，列右行，&lt;/span&gt;
&lt;span class="sd"&gt;    各立天元一为子，列左行，以定诸母，互乘左行之子，各得名曰衍数，&lt;/span&gt;
&lt;span class="sd"&gt;    次以各定母满去衍数，各余名曰奇数，以奇数与定母，用大衍术求一。&lt;/span&gt;
&lt;span class="sd"&gt;    '''&lt;/span&gt;
    &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;matrix&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
            &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,:]&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,:]&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,:]&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,:]&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,:]&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,:]&lt;/span&gt;
            
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [24]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="s2"&gt;"__main__"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;大衍求一术&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;65&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;83&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;
&lt;div class="prompt"&gt;&lt;/div&gt;

&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;23
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;我的古文水平和编程水平都还不够高，不然把中国古代数学中的种种算法都写出程序也是一件很风雅的事情。&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [ ]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt; 
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
</description><category>python</category><guid>https://goldengrape.github.io/posts/python/zhong-guo-gu-dai-shu-xue-suan-fa-jupyter/</guid><pubDate>Fri, 05 Jan 2018 12:50:45 GMT</pubDate></item><item><title>macOS X 中的$PATH</title><link>https://goldengrape.github.io/posts/python/macos-x-zhong-de-path/</link><dc:creator>Golden Grape</dc:creator><description>&lt;div&gt;&lt;p&gt;贪图享乐装了一个&lt;a href="https://github.com/robbyrussell/oh-my-zsh"&gt;oh-my-zsh&lt;/a&gt;, 结果装好以后突然发现在终端中常用的命令都找不到了, 什么source activate , jupyter , conda ,敲完了以后都是一句:&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;    zsh: command not found:
&lt;/pre&gt;


&lt;p&gt;真是一脑门子汗呐. 感觉就是召唤了一个不太熟的魔兽, 看起来很强大, 但不知道如何驾驭之.&lt;/p&gt;
&lt;!-- TEASER_END --&gt;

&lt;h2&gt;问题:&lt;/h2&gt;
&lt;p&gt;问题出在了zsh在加载的时候没有加载合适的PATH, 在unix/linux/mac这类系统下, 有个$PATH, 负责存储调用命令时的搜索路径, 我本能地觉得这个东西很复杂, 一直刻意避开, 现在也没办法了, 只好硬着头皮学了学.&lt;/p&gt;
&lt;p&gt;要看自己的$PATH, 可以&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;echo "$PATH"
&lt;/pre&gt;


&lt;p&gt;返回的结果可能是:&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin:/opt/X11/bin
&lt;/pre&gt;


&lt;p&gt;一串长长的字符串, 中间用:作为分隔. 里面记录了各种路径. 我启动zsh以后, 这个里面没有包含anaconda的路径, 导致我想运行anaconda中的命令会出错.&lt;/p&gt;
&lt;h2&gt;解决:&lt;/h2&gt;
&lt;p&gt;编辑$PATH.&lt;/p&gt;
&lt;p&gt;在macOS上, 有两种方案可以编辑$PATH:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在 /etc/paths.d 目录里添加.&lt;/li&gt;
&lt;li&gt;用编辑器往 ~/.bash_profile 文件里export.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;后一种我仍然不太明白, 而且在我的电脑上好像也没成功. 我来说说第一种方案.&lt;/p&gt;
&lt;p&gt;PATH是以文件的形式存储在/etc/paths.d这个目录中的, 要看当前已经存储的文件, 可以:&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;ls -l /etc/paths.d/
&lt;/pre&gt;


&lt;p&gt;可能返回的结果是:&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;-rw-r--r--  1 root  wheel  13 10 13  2015 40-XQuartz
-rw-r--r--  1 root  wheel  22 10 13  2015 TeX
&lt;/pre&gt;


&lt;p&gt;如果查看文件里的内容, 比如看40-XQuartz&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;cat /etc/paths.d/40-XQuartz
&lt;/pre&gt;


&lt;p&gt;那么将看到&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;/opt/X11/bin
&lt;/pre&gt;


&lt;p&gt;也就是需要找到的路径. 那么仿照这个, 也建立一个文件, 文件里面保存上要添加的路径即可.&lt;/p&gt;
&lt;p&gt;我还是习惯用atom作为编辑器, 所以:&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;sudo atom /etc/paths.d/anaconda3
&lt;/pre&gt;


&lt;p&gt;输入密码后, atom会在这个目录下新建一个叫做anaconda3的文件, 并且打开处于可编辑状态.&lt;/p&gt;
&lt;p&gt;于是我在这个文件里添加上我的anaconda3需要加入的path, 这个路径可以&lt;a href="https://docs.anaconda.com/anaconda/faq#what-is-the-default-path-for-installing-anaconda"&gt;从anaconda的faq里面查到&lt;/a&gt;&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;/Users/goldengrape/anaconda3/bin
&lt;/pre&gt;


&lt;p&gt;加入以后保存. 然后关闭终端, 再次重新打开, 这个路径就被加载好了, 不管是在bash下, 还是在zsh下都可以用了.&lt;/p&gt;
&lt;p&gt;如果还有其他软件需要特定设定$PATH, 也可以用同样的办法建立文件, 写入路径. 我个人比较喜欢这种方式, 看着清楚, 也不太受到切换shell的影响.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;参考:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="https://www.cyberciti.biz/faq/appleosx-bash-unix-change-set-path-environment-variable/"&gt;Mac OS X: Set / Change $PATH Variable&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description><guid>https://goldengrape.github.io/posts/python/macos-x-zhong-de-path/</guid><pubDate>Wed, 03 Jan 2018 12:38:31 GMT</pubDate></item></channel></rss>